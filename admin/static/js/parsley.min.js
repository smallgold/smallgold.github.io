!function(u){function s(t){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.init(t)}function a(t,e,i){if(this.options=e,this.Validator=new s(e),"ParsleyFieldMultiple"===i)return this;this.init(t,i||"ParsleyField")}function o(t,e,i){this.initMultiple(t,e),this.inherit(t,e),this.Validator=new s(e),this.init(t,i||"ParsleyFieldMultiple")}function h(t,e,i){this.init(t,e,i||"parsleyForm")}s.prototype={constructor:s,validators:{notnull:function(t){return 0<t.length},notblank:function(t){return"string"==typeof t&&""!==t.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(t){if("object"!=typeof t)return this.notnull(t)&&this.notblank(t);for(var e in t)if(this.required(t[e]))return!0;return!1},type:function(t,e){var i;switch(e){case"number":i=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":i=/^\d+$/;break;case"alphanum":i=/^\w+$/;break;case"email":i=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,6}$/i;break;case"url":t=/(https?|s?ftp|git)/i.test(t)?t:"http://"+t;case"urlstrict":i=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":i=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":i=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return!1}return""!==t&&i.test(t)},regexp:function(t,e,i){return RegExp(e,i.options.regexpFlag||"").test(t)},minlength:function(t,e){return t.length>=e},maxlength:function(t,e){return t.length<=e},rangelength:function(t,e){return this.minlength(t,e[0])&&this.maxlength(t,e[1])},min:function(t,e){return Number(t)>=e},max:function(t,e){return Number(t)<=e},range:function(t,e){return t>=e[0]&&t<=e[1]},equalto:function(t,e,i){return i.options.validateIfUnchanged=!0,t===u(e).val()},remote:function(t,e,i){function s(t,e){void 0!==e&&void 0!==i.Validator.messages.remote&&e!==i.Validator.messages.remote&&u(i.ulError+" .remote").remove(),i.updtConstraint({name:"remote",valid:t},e),i.manageValidationResult()}function n(t){if("object"!=typeof t)try{t=u.parseJSON(t)}catch(t){}return t}function r(t){return"object"==typeof t&&null!==t?void 0!==t.error?t.error:void 0!==t.message?t.message:null:null}var a={},o={};a[i.$element.attr("name")]=t,void 0!==i.options.remoteDatatype&&(o={dataType:i.options.remoteDatatype});return u.ajax(u.extend({},{url:e,data:a,type:i.options.remoteMethod||"GET",success:function(t){t=n(t),s(1===t||!0===t||"object"==typeof t&&null!==t&&void 0!==t.success,r(t))},error:function(t){t=n(t),s(!1,r(t))}},o)),null},mincheck:function(t,e){return this.minlength(t,e)},maxcheck:function(t,e){return this.maxlength(t,e)},rangecheck:function(t,e){return this.rangelength(t,e)}},init:function(t){var e,i=t.validators;for(e in t=t.messages,i)this.addValidator(e,i[e]);for(e in t)this.addMessage(e,t[e])},formatMesssage:function(t,e){if("object"!=typeof e)return"string"==typeof t?t.replace(/%s/i,e):"";for(var i in e)t=this.formatMesssage(t,e[i]);return t},addValidator:function(t,e){this.validators[t]=e},addMessage:function(t,e,i){if(void 0!==i&&!0===i)this.messages.type[t]=e;else if("type"===t)for(var s in e)this.messages.type[s]=e[s];else this.messages[t]=e}},a.prototype={constructor:a,init:function(t,e){this.type=e,this.valid=!0,this.element=t,this.validatedOnce=!1,this.$element=u(t),this.val=this.$element.val(),this.isRequired=!1,this.constraints={},void 0===this.isRadioOrCheckbox&&(this.isRadioOrCheckbox=!1,this.hash=this.generateHash(),this.errorClassHandler=this.options.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element),this.ulErrorManagement(),this.bindHtml5Constraints(),this.addConstraints(),this.hasConstraints()&&this.bindValidationEvents()},setParent:function(t){this.$parent=u(t)},getParent:function(){return this.$parent},bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.prop("required"))&&(this.options.required=!0),void 0!==this.$element.attr("type")&&RegExp(this.$element.attr("type"),"i").test("email url number range")&&(this.options.type=this.$element.attr("type"),RegExp(this.options.type,"i").test("number range"))&&(this.options.type="number",void 0!==this.$element.attr("min")&&this.$element.attr("min").length&&(this.options.min=this.$element.attr("min")),void 0!==this.$element.attr("max"))&&this.$element.attr("max").length&&(this.options.max=this.$element.attr("max")),"string"==typeof this.$element.attr("pattern")&&this.$element.attr("pattern").length&&(this.options.regexp=this.$element.attr("pattern"))},addConstraints:function(){for(var t in this.options){var e={};e[t]=this.options[t],this.addConstraint(e,!0)}},addConstraint:function(t,e){for(var i in t)i=i.toLowerCase(),"function"==typeof this.Validator.validators[i]&&(this.constraints[i]={name:i,requirements:t[i],valid:null},"required"===i&&(this.isRequired=!0),this.addCustomConstraintMessage(i));void 0===e&&this.bindValidationEvents()},updateConstraint:function(t,e){for(var i in t)this.updtConstraint({name:i,requirements:t[i],valid:null},e)},updtConstraint:function(t,e){this.constraints[t.name]=u.extend(!0,this.constraints[t.name],t),"string"==typeof e&&(this.Validator.messages[t.name]=e),this.bindValidationEvents()},removeConstraint:function(t){t=t.toLowerCase(),delete this.constraints[t],"required"===t&&(this.isRequired=!1),this.hasConstraints()?this.bindValidationEvents():"ParsleyForm"==typeof this.getParent()?this.getParent().removeItem(this.$element):this.destroy()},addCustomConstraintMessage:function(t){var e=t+("type"===t&&void 0!==this.options[t]?this.options[t].charAt(0).toUpperCase()+this.options[t].substr(1):"")+"Message";void 0!==this.options[e]&&this.Validator.addMessage("type"===t?this.options[t]:t,this.options[e],"type"===t)},bindValidationEvents:function(){this.valid=null,this.$element.addClass("parsley-validated"),this.$element.off("."+this.type),this.options.remote&&!/change/i.test(this.options.trigger)&&(this.options.trigger=this.options.trigger?" change":"change");var t=(this.options.trigger||"")+(/key/i.test(this.options.trigger)?"":" keyup");this.$element.is("select")&&(t+=/change/i.test(t)?"":" change"),t=t.replace(/^\s+/g,"").replace(/\s+$/g,""),this.$element.on((t+" ").split(" ").join("."+this.type+" "),!1,u.proxy(this.eventValidation,this))},generateHash:function(){return"parsley-"+(Math.random()+"").substring(2)},getHash:function(){return this.hash},getVal:function(){return this.$element.data("value")||this.$element.val()},eventValidation:function(t){var e=this.getVal();if("keyup"===t.type&&!/keyup/i.test(this.options.trigger)&&!this.validatedOnce||"change"===t.type&&!/change/i.test(this.options.trigger)&&!this.validatedOnce||!this.isRadioOrCheckbox&&this.getLength(e)<this.options.validationMinlength&&!this.validatedOnce)return!0;this.validate()},getLength:function(t){return t&&t.hasOwnProperty("length")?t.length:0},isValid:function(){return this.validate(!1)},hasConstraints:function(){for(var t in this.constraints)return!0;return!1},validate:function(t){var e=this.getVal();return this.hasConstraints()?this.options.listeners.onFieldValidate(this.element,this)||""===e&&!this.isRequired?(this.reset(),null):this.needsValidation(e)?(e=this.applyValidators(),(void 0!==t?t:this.options.showErrors)&&this.manageValidationResult(),e):this.valid:null},needsValidation:function(t){return!(!this.options.validateIfUnchanged&&null!==this.valid&&this.val===t&&this.validatedOnce)&&(this.val=t,this.validatedOnce=!0)},applyValidators:function(){var t,e=null;for(t in this.constraints){var i=this.Validator.validators[this.constraints[t].name](this.val,this.constraints[t].requirements,this);!1===i?(this.constraints[t].valid=e=!1,this.options.listeners.onFieldError(this.element,this.constraints,this)):!0===i&&(e=!(this.constraints[t].valid=!0)!==e,this.options.listeners.onFieldSuccess(this.element,this.constraints,this))}return e},manageValidationResult:function(){var t,e=null;for(t in this.constraints)!1===this.constraints[t].valid?(this.manageError(this.constraints[t]),e=!1):!0===this.constraints[t].valid&&(this.removeError(this.constraints[t].name),e=!1!==e);return this.valid=e,!0===this.valid?(this.removeErrors(),this.errorClassHandler.removeClass(this.options.errorClass).addClass(this.options.successClass),!0):!1===this.valid?(this.errorClassHandler.removeClass(this.options.successClass).addClass(this.options.errorClass),!1):(this.ulError&&0===u(this.ulError).children().length&&this.removeErrors(),e)},ulErrorManagement:function(){this.ulError="#"+this.hash,this.ulTemplate=u(this.options.errors.errorsWrapper).attr("id",this.hash).addClass("parsley-error-list")},removeError:function(t){t=this.ulError+" ."+t;var e=this;this.options.animate?u(t).fadeOut(this.options.animateDuration,function(){u(this).remove(),e.ulError&&0===u(e.ulError).children().length&&e.removeErrors()}):u(t).remove()},addError:function(t){for(var e in t){var i=u(this.options.errors.errorElem).addClass(e);u(this.ulError).append(this.options.animate?u(i).html(t[e]).hide().fadeIn(this.options.animateDuration):u(i).html(t[e]))}},removeErrors:function(){this.options.animate?u(this.ulError).fadeOut(this.options.animateDuration,function(){u(this).remove()}):u(this.ulError).remove()},reset:function(){for(var t in this.valid=null,this.removeErrors(),this.validatedOnce=!1,this.errorClassHandler.removeClass(this.options.successClass).removeClass(this.options.errorClass),this.constraints)this.constraints[t].valid=null;return this},manageError:function(t){var e,i,s;u(this.ulError).length||this.manageErrorContainer(),"required"===t.name&&null!==this.getVal()&&0<this.getVal().length||this.isRequired&&"required"!==t.name&&(null===this.getVal()||0===this.getVal().length)||(e=t.name,i=!1!==this.options.errorMessage?"custom-error-message":e,t=!(s={})!==this.options.errorMessage?this.options.errorMessage:"type"===t.name?this.Validator.messages[e][t.requirements]:void 0===this.Validator.messages[e]?this.Validator.messages.defaultMessage:this.Validator.formatMesssage(this.Validator.messages[e],t.requirements),u(this.ulError+" ."+i).length)||(s[i]=t,this.addError(s))},manageErrorContainer:function(){var t=this.options.errorContainer||this.options.errors.container(this.element,this.isRadioOrCheckbox),e=this.options.animate?this.ulTemplate.show():this.ulTemplate;void 0!==t?u(t).append(e):(this.isRadioOrCheckbox?this.$element.parent():this.$element).after(e)},addListener:function(t){for(var e in t)this.options.listeners[e]=t[e]},destroy:function(){this.$element.removeClass("parsley-validated"),this.reset().$element.off("."+this.type).removeData(this.type)}},o.prototype={constructor:o,initMultiple:function(t,e){this.element=t,this.$element=u(t),this.group=e.group||!1,this.hash=this.getName(),this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]',this.isRadioOrCheckbox=!0,this.isRadio=this.$element.is("input[type=radio]"),this.isCheckbox=this.$element.is("input[type=checkbox]"),this.errorClassHandler=e.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element.parent()},inherit:function(t,e){var i,s=new a(t,e,"ParsleyFieldMultiple");for(i in s)void 0===this[i]&&(this[i]=s[i])},getName:function(){if(this.group)return"parsley-"+this.group;if(void 0===this.$element.attr("name"))throw"A radio / checkbox input must have a data-group attribute or a name to be Parsley validated !";return"parsley-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")},getVal:function(){var t;return this.isRadio?u(this.siblings+":checked").val()||"":this.isCheckbox?(t=[],u(this.siblings+":checked").each(function(){t.push(u(this).val())}),t):void 0},bindValidationEvents:function(){this.valid=null,this.$element.addClass("parsley-validated"),this.$element.off("."+this.type);var t=this,e=(e=(this.options.trigger||"")+(/change/i.test(this.options.trigger)?"":" change")).replace(/^\s+/g,"").replace(/\s+$/g,"");u(this.siblings).each(function(){u(this).on(e.split(" ").join("."+t.type+" "),!1,u.proxy(t.eventValidation,t))})}};h.prototype={constructor:h,init:function(t,e,i){this.type=i,this.items=[],this.$element=u(t),this.options=e;var s=this;this.$element.find(e.inputs).each(function(){s.addItem(this)}),this.$element.on("submit."+this.type,!1,u.proxy(this.validate,this))},addListener:function(t){for(var e in t)if(/Field/.test(e))for(var i=0;i<this.items.length;i++)this.items[i].addListener(t);else this.options.listeners[e]=t[e]},addItem:function(t){if(u(t).is(this.options.excluded))return!1;(t=u(t).parsley(this.options)).setParent(this),this.items.push(t)},removeItem:function(t){t=u(t).parsley();for(var e=0;e<this.items.length;e++)if(this.items[e].hash===t.hash)return this.items[e].destroy(),this.items.splice(e,1),!0;return!1},validate:function(t){var e=!0;this.focusedField=!1;for(var i=0;i<this.items.length;i++)void 0!==this.items[i]&&!1===this.items[i].validate()&&(e=!1,!this.focusedField&&"first"===this.options.focus||"last"===this.options.focus)&&(this.focusedField=this.items[i].$element);return this.focusedField&&!e&&this.focusedField.focus(),this.options.listeners.onFormSubmit(e,t,this),e},isValid:function(){for(var t=0;t<this.items.length;t++)if(!1===this.items[t].isValid())return!1;return!0},removeErrors:function(){for(var t=0;t<this.items.length;t++)this.items[t].parsley("reset")},destroy:function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.$element.off("."+this.type).removeData(this.type)},reset:function(){for(var t=0;t<this.items.length;t++)this.items[t].reset()}},u.fn.parsley=function(s,n){function t(t,e){var i=u(t).data(e);if(!i){switch(e){case"parsleyForm":i=new h(t,r,"parsleyForm");break;case"parsleyField":i=new a(t,r,"parsleyField");break;case"parsleyFieldMultiple":i=new o(t,r,"parsleyFieldMultiple");break;default:return}u(t).data(e,i)}return"string"!=typeof s||"function"!=typeof i[s]||void 0!==(i=i[s](n))?i:u(t)}var r=u.extend(!0,{},u.fn.parsley.defaults,void 0!==window.ParsleyConfig?window.ParsleyConfig:{},s,this.data()),e=null;return u(this).is("form")||!0===u(this).data("bind")?e=t(u(this),"parsleyForm"):u(this).is(r.inputs)&&!u(this).is(r.excluded)&&(e=t(u(this),u(this).is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"parsleyField")),"function"==typeof n?n():e},u.fn.parsley.Constructor=h,u.fn.parsley.defaults={inputs:"input, textarea, select",excluded:"input[type=hidden], input[type=file], :disabled",trigger:!1,animate:!0,animateDuration:300,focus:"first",validationMinlength:3,successClass:"parsley-success",errorClass:"parsley-error",errorMessage:!1,validators:{},showErrors:!0,messages:{},validateIfUnchanged:!1,errors:{classHandler:function(){},container:function(){},errorsWrapper:"<ul></ul>",errorElem:"<li></li>"},listeners:{onFieldValidate:function(){return!1},onFormSubmit:function(){},onFieldError:function(){},onFieldSuccess:function(){}}},u(window).on("load",function(){u('[data-validate="parsley"]').each(function(){u(this).parsley()})})}(window.jQuery||window.Zepto);