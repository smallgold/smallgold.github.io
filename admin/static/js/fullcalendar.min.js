!function(mt,yt){function t(t){mt.extend(!0,h,t)}function o(e,o,t){function n(){setTimeout(function(){!S.start&&a()&&s()},0)}function r(){return e.is(":visible")}function a(){return mt("body").is(":visible")}function i(t){S&&t==S.name||(t=t,z++,S&&(w("viewDestroy",S,S,S.element),m(),S.triggerEventDestroy(),y(),S.element.remove(),C.deactivateButton(S.name)),C.activateButton(t),S=new V[t](mt("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(E),D),s(),b(),z--)}function s(t){(!S.start||t||S.start>W||W>=S.end)&&r()&&l(t)}function l(t){z++,S.start&&(w("viewDestroy",S,S,S.element),m(),g()),y(),S.render(W,t||0),d(),b(),(S.afterRender||function(){})(),C.updateTitle(S.title),(t=new Date)>=S.start&&S.end>t?C.disableButton("today"):C.enableButton("today"),w("viewRender",S,S,S.element),S.trigger("viewDisplay",R),z--,(!o.lazyFetching||H(S.visStart,S.visEnd)?p:h)()}function c(){r()&&(m(),g(),u(),d(),h())}function u(){x=o.contentHeight||(o.height?o.height-(M?M.height():0)-Ht(E):Math.round(E.width()/Math.max(o.aspectRatio,.5)))}function d(){x===yt&&u(),z++,S.setHeight(x),S.setWidth(E.width()),z--,T=e.outerWidth()}function f(){var t;z||(S.start?(t=++N,setTimeout(function(){t==N&&!z&&r()&&T!=(T=e.outerWidth())&&(z++,c(),S.trigger("windowResize",R),z--)},200)):n())}function v(t){g(),h(t)}function h(t){r()&&(S.setEventData(A),S.renderEvents(A,t),S.trigger("eventAfterAllRender"))}function g(){S.triggerEventDestroy(),S.clearEvents(),S.clearEventData()}function p(){F(S.visStart,S.visEnd)}function m(){S&&S.unselect()}function y(){E.css({width:"100%",height:E.height(),overflow:"hidden"})}function b(){E.css({width:"",height:"",overflow:""})}function w(t,e){return o[t]?o[t].apply(e||R,Array.prototype.slice.call(arguments,2)):yt}var D=this;D.options=o,D.render=function(t){E?r()&&(u(),l(t)):(o.theme,e.addClass("fc"),o.isRTL?e.addClass("fc-rtl"):e.addClass("fc-ltr"),o.theme&&e.addClass("ui-widget"),E=mt("<div class='fc-content' style='position:relative'/>").prependTo(e),C=new U(D,o),(M=C.render())&&e.prepend(M),i(o.defaultView),o.handleWindowResize&&mt(window).resize(f),a()||n())},D.destroy=function(){S&&(w("viewDestroy",S,S,S.element),S.triggerEventDestroy()),mt(window).unbind("resize",f),C.destroy(),E.remove(),e.removeClass("fc fc-rtl ui-widget")},D.refetchEvents=function(){g(),p()},D.reportEvents=function(t){A=t,h()},D.reportEventChange=function(t){v(t)},D.rerenderEvents=v,D.changeView=i,D.select=function(t,e,n){S.select(t,e,n===yt||n)},D.unselect=m,D.prev=function(){s(-1)},D.next=function(){s(1)},D.prevYear=function(){O(W,-1),s()},D.nextYear=function(){O(W,1),s()},D.today=function(){W=new Date,s()},D.gotoDate=function(t,e,n){t instanceof Date?W=Ct(t):_(W,t,e,n),s()},D.incrementDate=function(t,e,n){t!==yt&&O(W,t),e!==yt&&L(W,e),n!==yt&&bt(W,n),s()},D.formatDate=function(t,e){return q(t,e,o)},D.formatDates=function(t,e,n){return Y(t,e,n,o)},D.getDate=function(){return Ct(W)},D.getView=function(){return S},D.option=function(t,e){return e===yt?o[t]:("height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(o[t]=e,c()),yt)},D.trigger=w,function(f,t){function o(n,r){!function t(e,n){var r,a,o=J.sourceFetchers;for(r=0;o.length>r;r++){if(!0===(a=o[r](e,g,p,n)))return;if("object"==typeof a)return t(a,n),yt}var i=e.events;{var s,l,c,u,d;i?mt.isFunction(i)?(v(),i(Ct(g),Ct(p),function(t){n(t),h()})):mt.isArray(i)?n(i):n():e.url?(s=e.success,l=e.error,c=e.complete,i=mt.isFunction(e.data)?e.data():e.data,i=mt.extend({},i||{}),u=I(e.startParam,f.startParam),d=I(e.endParam,f.endParam),u&&(i[u]=Math.round(+g/1e3)),d&&(i[d]=Math.round(+p/1e3)),v(),mt.ajax(mt.extend({},$,e,{data:i,success:function(t){t=t||[];var e=j(s,this,arguments);mt.isArray(e)&&(t=e),n(t)},error:function(){j(l,this,arguments),n()},complete:function(){j(c,this,arguments),h()}}))):n()}}(n,function(t){if(r==m){if(t){f.eventDataTransform&&(t=mt.map(t,f.eventDataTransform)),n.eventDataTransform&&(t=mt.map(t,n.eventDataTransform));for(var e=0;t.length>e;e++)t[e].source=n,s(t[e]);w=w.concat(t)}--y||c(w)}})}function e(t){{if(mt.isFunction(t)||mt.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"!=typeof t)return yt;var e=t;e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var n=J.sourceNormalizers,r=0;n.length>r;r++)n[r](e);return d.push(t),t}}function v(){b++||i("loading",null,!0,l())}function h(){--b||i("loading",null,!1,l())}function s(t){var e=t.source||{},n=I(e.ignoreTimezone,f.ignoreTimezone);t._id=t._id||(t.id===yt?"_fc"+Q++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=Ct(t.start=P(t.start,n)),t.end=P(t.end,n),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?Ct(t.end):null,t.allDay===yt&&(t.allDay=I(e.allDayDefault,f.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function n(t,e){return t&&e&&r(t)==r(e)}function r(t){return("object"==typeof t?t.events||t.url:"")||t}var a=this;a.isFetchNeeded=function(t,e){return!g||t<g||p<e},a.fetchEvents=function(t,e){g=t,p=e,w=[];var n=++m,r=d.length;y=r;for(var a=0;a<r;a++)o(d[a],n)},a.addEventSource=function(t){(t=e(t))&&(y++,o(t,m))},a.removeEventSource=function(e){d=mt.grep(d,function(t){return!n(t,e)}),w=mt.grep(w,function(t){return!n(t.source,e)}),c(w)},a.updateEvent=function(t){for(var e,n=w.length,r=l().defaultEventEnd,a=t.start-t._start,o=t.end?t.end-(t._end||r(t)):0,i=0;i<n;i++)(e=w[i])._id==t._id&&e!=t&&(e.start=new Date(+e.start+a),e.end=t.end?e.end?new Date(+e.end+o):new Date(+r(e)+o):null,e.title=t.title,e.url=t.url,e.allDay=t.allDay,e.className=t.className,e.editable=t.editable,e.color=t.color,e.backgroundColor=t.backgroundColor,e.borderColor=t.borderColor,e.textColor=t.textColor,s(e));s(t),c(w)},a.renderEvent=function(t,e){s(t),t.source||(e&&(u.events.push(t),t.source=u),w.push(t)),c(w)},a.removeEvents=function(t){if(t){var e;mt.isFunction(t)||(e=t+"",t=function(t){return t._id==e}),w=mt.grep(w,t,!0);for(var n=0;d.length>n;n++)mt.isArray(d[n].events)&&(d[n].events=mt.grep(d[n].events,t,!0))}else{w=[];for(n=0;d.length>n;n++)mt.isArray(d[n].events)&&(d[n].events=[])}c(w)},a.clientEvents=function(e){return mt.isFunction(e)?mt.grep(w,e):e?(e+="",mt.grep(w,function(t){return t._id==e})):w},a.normalizeEvent=s;for(var g,p,i=a.trigger,l=a.getView,c=a.reportEvents,u={events:[]},d=[u],m=0,y=0,b=0,w=[],D=0;t.length>D;D++)e(t[D])}.call(D,o,t);var C,M,E,S,T,x,k,H=D.isFetchNeeded,F=D.fetchEvents,R=e[0],N=0,z=0,W=new Date,A=[];_(W,o.year,o.month,o.date),o.droppable&&mt(document).bind("dragstart",function(t,e){var n,r=t.target,a=mt(r);!a.parents(".fc").length&&(n=o.dropAccept,mt.isFunction(n)?n.call(r,a):a.is(n))&&(k=r,S.dragStart(k,t,e))}).bind("dragstop",function(t,e){k&&(S.dragStop(k,t,e),k=null)})}function U(l,c){function t(t){var s=mt("<td class='fc-header-"+t+"'/>"),t=c.header[t];return t&&mt.each(t.split(" "),function(t){var i;0<t&&s.append("<span class='fc-header-space'/>"),mt.each(this.split(","),function(t,e){var n,r,a,o;"title"==e?(s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),i&&i.addClass(u+"-corner-right"),i=null):(l[e]?n=l[e]:V[e]&&(n=function(){o.removeClass(u+"-state-hover"),l.changeView(e)}),n&&(r=c.theme?R(c.buttonIcons,e):null,a=R(c.buttonText,e),Rt(o=mt("<span class='fc-button fc-button-"+e+" "+u+"-state-default'>"+(r?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+r+"'/></span>":a)+"</span>").click(function(){o.hasClass(u+"-state-disabled")||n()}).mousedown(function(){o.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){o.removeClass(u+"-state-down")}).hover(function(){o.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){o.removeClass(u+"-state-hover").removeClass(u+"-state-down")}).appendTo(s)),i||o.addClass(u+"-corner-left"),i=o))}),i&&i.addClass(u+"-corner-right")}),s}var e=this;e.render=function(){return u=c.theme?"ui":"fc",c.header?n=mt("<table class='fc-header' style='width:100%'/>").append(mt("<tr/>").append(t("left")).append(t("center")).append(t("right"))):yt},e.destroy=function(){n.remove()},e.updateTitle=function(t){n.find("h2").html(t)},e.activateButton=function(t){n.find("span.fc-button-"+t).addClass(u+"-state-active")},e.deactivateButton=function(t){n.find("span.fc-button-"+t).removeClass(u+"-state-active")},e.disableButton=function(t){n.find("span.fc-button-"+t).addClass(u+"-state-disabled")},e.enableButton=function(t){n.find("span.fc-button-"+t).removeClass(u+"-state-disabled")};var u,n=mt([])}function O(t,e,n){t.setFullYear(t.getFullYear()+e),n||Dt(t)}function L(t,e,n){if(+t){var e=t.getMonth()+e,r=Ct(t);for(r.setDate(1),r.setMonth(e),t.setMonth(e),n||Dt(t);t.getMonth()!=r.getMonth();)t.setDate(t.getDate()+(t<r?1:-1))}return t}function bt(t,e,n){var r;return+t&&(e=t.getDate()+e,(r=Ct(t)).setHours(9),r.setDate(e),t.setDate(e),n||Dt(t),a(t,r)),t}function a(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*s)}function wt(t,e){return t.setMinutes(t.getMinutes()+e),t}function Dt(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function Ct(t,e){return e?Dt(new Date(+t)):new Date(+t)}function Mt(){for(var t,e=0;(t=new Date(1970,e++,1)).getHours(););return t}function Et(t,e){return Math.round((Ct(t,!0)-Ct(e,!0))/r)}function _(t,e,n,r){e!==yt&&e!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(e)),n!==yt&&n!=t.getMonth()&&(t.setDate(1),t.setMonth(n)),r!==yt&&t.setDate(r)}function P(t,e){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):B(t,e=e===yt?!0:e)||(t?new Date(t):null):null}function B(t,e){var n,t=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);return t?(n=new Date(t[1],0,1),e||!t[13]?(e=new Date(t[1],0,1,9,0),t[3]&&(n.setMonth(t[3]-1),e.setMonth(t[3]-1)),t[5]&&(n.setDate(t[5]),e.setDate(t[5])),a(n,e),t[7]&&n.setHours(t[7]),t[8]&&n.setMinutes(t[8]),t[10]&&n.setSeconds(t[10]),t[12]&&n.setMilliseconds(1e3*Number("0."+t[12])),a(n,e)):(n.setUTCFullYear(t[1],t[3]?t[3]-1:0,t[5]||1),n.setUTCHours(t[7]||0,t[8]||0,t[10]||0,t[12]?1e3*Number("0."+t[12]):0),t[14]&&(e=60*Number(t[16])+(t[18]?Number(t[18]):0),e*="-"==t[15]?1:-1,n=new Date(+n+6e4*e))),n):null}function St(t){var e;return"number"==typeof t?60*t:"object"==typeof t?60*t.getHours()+t.getMinutes():(t=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/))?(e=parseInt(t[1],10),t[3]&&(e%=12,"p"==t[3].toLowerCase().charAt(0))&&(e+=12),60*e+(t[2]?parseInt(t[2],10):0)):void 0}function q(t,e,n){return Y(t,null,e,n)}function Y(t,e,n,r){r=r||h;for(var a,o,i,s=t,l=e,c=n.length,u="",d=0;d<c;d++)if("'"==(a=n.charAt(d))){for(o=d+1;o<c;o++)if("'"==n.charAt(o)){s&&(u+=o==d+1?"'":n.substring(d+1,o),d=o);break}}else if("("==a){for(o=d+1;o<c;o++)if(")"==n.charAt(o)){var f=q(s,n.substring(d+1,o),r);parseInt(f.replace(/\D/,""),10)&&(u+=f),d=o;break}}else if("["==a){for(o=d+1;o<c;o++)if("]"==n.charAt(o)){var v=n.substring(d+1,o);(f=q(s,v,r))!=q(l,v,r)&&(u+=f),d=o;break}}else if("{"==a)s=e,l=t;else if("}"==a)s=t,l=e;else{for(o=c;d<o;o--)if(i=g[n.substring(d,o)]){s&&(u+=i(s,r)),d=o-1;break}o==d&&s&&(u+=a)}return u}function Tt(t){return t.end?(e=t.end,n=t.allDay,e=Ct(e),n||e.getHours()||e.getMinutes()?bt(e,1):Dt(e)):bt(Ct(t.start),1);var e,n}function At(t,a,o){t.unbind("mouseover").mouseover(function(t){for(var e,n,r=t.target;r!=this;)r=(e=r).parentNode;(n=e._fci)!==yt&&(e._fci=yt,n=a[n],o(n.event,n.element,n),mt(t.target).trigger(t)),t.stopPropagation()})}function xt(t,e,n){for(var r,a=0;t.length>a;a++)(r=mt(t[a])).width(Math.max(0,e-kt(r,n)))}function Ot(t,e,n){for(var r,a=0;t.length>a;a++)(r=mt(t[a])).height(Math.max(0,e-Ht(r,n)))}function kt(t,e){return n=t,(parseFloat(mt.css(n[0],"paddingLeft",!0))||0)+(parseFloat(mt.css(n[0],"paddingRight",!0))||0)+(n=t,(parseFloat(mt.css(n[0],"borderLeftWidth",!0))||0)+(parseFloat(mt.css(n[0],"borderRightWidth",!0))||0))+(e?(n=t,(parseFloat(mt.css(n[0],"marginLeft",!0))||0)+(parseFloat(mt.css(n[0],"marginRight",!0))||0)):0);var n}function Ht(t,e){return n=t,(parseFloat(mt.css(n[0],"paddingTop",!0))||0)+(parseFloat(mt.css(n[0],"paddingBottom",!0))||0)+(n=t,(parseFloat(mt.css(n[0],"borderTopWidth",!0))||0)+(parseFloat(mt.css(n[0],"borderBottomWidth",!0))||0))+(e?(n=t,(parseFloat(mt.css(n[0],"marginTop",!0))||0)+(parseFloat(mt.css(n[0],"marginBottom",!0))||0)):0);var n}function Lt(t,e){return t-e}function Z(t){return Math.max.apply(Math,t)}function e(t){return(t<10?"0":"")+t}function R(t,e){if(t[e]!==yt)return t[e];for(var n,r=e.split(/(?=[A-Z])/),a=r.length-1;0<=a;a--)if((n=t[r[a].toLowerCase()])!==yt)return n;return t[""]}function Ft(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Rt(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Nt(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function _t(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,r=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,a=t.textColor||n.textColor||e("eventTextColor"),o=[];return i&&o.push("background-color:"+i),r&&o.push("border-color:"+r),a&&o.push("color:"+a),o.join(";")}function j(t,e,n){if(t=mt.isFunction(t)?[t]:t){for(var r,a=0;t.length>a;a++)r=t[a].apply(e,n)||r;return r}}function I(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==yt)return arguments[t]}function n(a,t,O){function i(t){t.click(L).mousedown(P)}function L(t){var e;R("selectable")||(e=B(mt(this).data("date")),N("dayClick",this,e,!0,t))}function n(t,e,n){n&&C.build();for(var r=Y(t,e),a=0;r.length>a;a++){var o=r[a];i(s(o.row,o.leftCol,o.row,o.rightCol))}}function s(t,e,n,r){t=C.rect(t,e,n,r,a);return _(t,a)}var o=this;o.renderBasic=function(t,e,n){b=t,w=e,D=n,T=R("theme")?"ui":"fc",x=R("columnFormat"),k=R("weekNumbers"),H=R("weekNumberTitle"),F="iso"!=R("weekNumberCalculation")?"w":"W",u||(p=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a)),t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var t,e,n=T+"-widget-header",r="";for(r+="<thead><tr>",k&&(r+="<th class='fc-week-number "+n+"'>"+Ft(H)+"</th>"),t=0;t<w;t++)e=W(0,t),r+="<th class='fc-day-header fc-"+Wt[e.getDay()]+" "+n+"'>"+Ft(A(e,x))+"</th>";return r+="</tr></thead>"}()+function(){var t,e,n,r=T+"-widget-content",a="";for(a+="<tbody>",t=0;t<b;t++){for(a+="<tr class='fc-week'>",k&&(n=W(t,0),a+="<td class='fc-week-number "+r+"'><div>"+Ft(A(n,F))+"</div></td>"),e=0;e<w;e++)n=W(t,e),a+=function(t){var e=T+"-widget-content",n=o.start.getMonth(),r=Dt(new Date),a="",e=["fc-day","fc-"+Wt[t.getDay()],e];return t.getMonth()!=n&&e.push("fc-other-month"),+t==+r?e.push("fc-today",T+"-state-highlight"):e.push(t<r?"fc-past":"fc-future"),a+="<td class='"+e.join(" ")+"' data-date='"+A(t,"yyyy-MM-dd")+"'><div>",D&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>"),a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}(n);a+="</tr>"}return a+="</tbody>"}()+"</table>",r&&r.remove(),r=mt(t).appendTo(a),l=r.find("thead"),c=l.find(".fc-day-header"),u=r.find("tbody"),d=u.find("tr"),f=u.find(".fc-day"),v=d.find("td:first-child"),h=d.eq(0).find(".fc-day > div"),g=d.eq(0).find(".fc-day-content > div"),Nt(l.add(l.find("tr"))),Nt(d),d.eq(0).addClass("fc-first"),d.filter(":last").addClass("fc-last"),f.each(function(t,e){t=W(Math.floor(t/w),t%w);N("dayRender",o,t,mt(e))}),i(f)},o.setHeight=function(t){var n,r,a,t=t-l.height();"variable"==R("weekMode")?n=r=Math.floor(t/(1==b?2:6)):(n=Math.floor(t/b),r=t-n*(b-1)),v.each(function(t,e){t<b&&(a=mt(e)).find("> div").css("min-height",(t==b-1?r:n)-Ht(a))})},o.setWidth=function(t){e=t,E.clear(),S.clear(),y=0,k&&(y=l.find("th.fc-week-number").outerWidth()),m=Math.floor((e-y)/w),xt(c.slice(0,-1),m)},o.renderDayOverlay=n,o.defaultSelectionEnd=function(t){return Ct(t)},o.renderSelection=function(t,e){n(t,bt(Ct(e),1),!0)},o.clearSelection=function(){z()},o.reportDayClick=function(t,e,n){var r=q(t),r=f[r.row*w+r.col];N("dayClick",r,t,e,n)},o.dragStart=function(t,e){M.start(function(t){z(),t&&s(t.row,t.col,t.row,t.col)},e)},o.dragStop=function(t,e,n){var r=M.stop();z(),r&&(r=W(r),N("drop",t,r,!0,e,n))},o.defaultEventEnd=function(t){return Ct(t.start)},o.getHoverListener=function(){return M},o.colLeft=function(t){return E.left(t)},o.colRight=function(t){return E.right(t)},o.colContentLeft=function(t){return S.left(t)},o.colContentRight=function(t){return S.right(t)},o.getIsCellAllDay=function(){return!0},o.allDayRow=function(t){return d.eq(t)},o.getRowCnt=function(){return b},o.getColCnt=function(){return w},o.getColWidth=function(){return m},o.getDaySegmentContainer=function(){return p},Bt.call(o,a,t,O),Xt.call(o),It.call(o),function(){var n=this;n.renderEvents=function(t,e){n.renderDayEvents(t,e)},n.clearEvents=function(){n.getDaySegmentContainer().empty()},jt.call(n)}.call(o);var r,l,c,u,d,f,v,h,g,p,e,m,y,b,w,D,C,M,E,S,T,x,k,H,F,R=o.opt,N=o.trigger,_=o.renderOverlay,z=o.clearOverlays,P=o.daySelectionMousedown,W=o.cellToDate,q=o.dateToCell,Y=o.rangeToSegments,A=t.formatDate;Rt(a.addClass("fc-grid")),C=new Jt(function(n,r){var a,o,i;c.each(function(t,e){a=mt(e),o=a.offset().left,t&&(i[1]=o),i=[o],r[t]=i}),i[1]=o+a.outerWidth(),d.each(function(t,e){t<b&&(a=mt(e),o=a.offset().top,t&&(i[1]=o),i=[o],n[t]=i)}),i[1]=o+a.outerHeight()}),M=new Vt(C),E=new zt(function(t){return h.eq(t)}),S=new zt(function(t){return g.eq(t)})}function d(l,O,L){function _(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var t,e,n,r=F+"-widget-header",a="";for(a+="<thead><tr>",at?(t=A(0,0),e=gt(t,it),nt?e+=ot:e=ot+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+Ft(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;n<S;n++)t=A(0,n),a+="<th class='fc-"+Wt[t.getDay()]+" fc-col"+n+" "+r+"'>"+Ft(gt(t,rt))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th></tr></thead>"}()+function(){var t,e,n,r,a=F+"-widget-header",o=F+"-widget-content",i=Dt(new Date),s="";for(s+="<tbody><tr><th class='fc-agenda-axis "+a+"'>&nbsp;</th>",e="",t=0;t<S;t++)n=A(0,t),r=["fc-col"+t,"fc-"+Wt[n.getDay()],o],+n==+i?r.push(F+"-state-highlight","fc-today"):r.push(n<i?"fc-past":"fc-future"),n="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",e+=n;return s=s+e+"<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}()+"</table>";i&&i.remove(),i=mt(t).appendTo(l),n=i.find("thead"),u=n.find("th").slice(1,-1),r=i.find("tbody"),d=r.find("td").slice(0,-1),e=d.find("> div"),U=d.find(".fc-day-content > div"),Z=d.eq(0),G=e.eq(0),Nt(n.add(n.find("tr"))),Nt(r.add(r.find("tr")))}function P(t){t.click(q).mousedown(dt)}function c(t){t.click(q).mousedown(J)}function q(t){var e,n,r,a;z("selectable")||(e=Math.min(S-1,Math.floor((t.pageX-i.offset().left-w)/D)),n=A(0,e),(r=this.parentNode.className.match(/fc-slot(\d+)/))?(r=parseInt(r[1])*z("slotMinutes"),a=Math.floor(r/60),n.setHours(a),n.setMinutes(r%60+R),W("dayClick",d[e],n,!1,t)):W("dayClick",d[e],n,!0,t))}function Y(t,e,n){n&&T.build();for(var r=ht(t,e),a=0;r.length>a;a++){var o=r[a];P(B(o.row,o.leftCol,o.row,o.rightCol))}}function B(t,e,n,r){t=T.rect(t,e,n,r,f);return st(t,f)}function j(t,e){for(var n=0;n<S;n++){var r,a=A(0,n),o=bt(Ct(a),1),i=new Date(Math.max(a,t)),o=new Date(Math.min(o,e));i<o&&(r=T.rect(0,n,0,n,m),i=s(a,i),a=s(a,o),r.top=i,r.height=a-i,c(st(r,m)))}}function a(t){return z("allDaySlot")&&!t.row}function o(t){var e=A(0,t.col),t=t.row;return z("allDaySlot")&&t--,0<=t&&wt(e,R+t*M),e}function s(t,e){var n,r;return t=Ct(t,!0),wt(Ct(t),R)>e?0:e>=wt(Ct(t),N)?y.height():(t=z("slotMinutes"),e=60*e.getHours()+e.getMinutes()-R,n=Math.floor(e/t),(r=pt[n])===yt&&(r=pt[n]=y.find("tr").eq(n).find("td div")[0].offsetTop),Math.max(0,Math.round(r-1+C*(e%t/t))))}function I(t,e){var n,r,a,o=z("selectHelper");T.build(),o?0<=(n=vt(t).col)&&n<S&&(n=T.rect(0,n,0,n,m),(r=s(t,t))<(a=s(t,e)))&&(n.top=r,n.height=a-r,n.left+=2,n.width-=5,mt.isFunction(o)?(a=o(t,e))&&(n.position="absolute",b=mt(a).css(n).appendTo(m)):(n.isStart=!0,n.isEnd=!0,(b=mt(ft({title:"",start:t,end:e,className:["fc-select-helper"],editable:!1},n))).css("opacity",z("dragOpacity"))),b)&&(c(b),m.append(b),xt(b,n.width,!0),Ot(b,n.height,!0)):j(t,e)}function X(){lt(),b&&(b.remove(),b=null)}function J(t){var n;1==t.which&&z("selectable")&&(ut(t),x.start(function(t,e){X(),t&&t.col==e.col&&!a(t)?(e=o(e),t=o(t),I((n=[e,wt(Ct(e),M),t,wt(Ct(t),M)].sort(Lt))[0],n[3])):n=null},t),mt(document).one("mouseup",function(t){x.stop(),n&&(+n[0]==+n[1]&&V(n[0],!1,t),ct(n[0],n[3],!1,t))}))}function V(t,e,n){W("dayClick",d[vt(t).col],t,e,n)}var t=this;t.renderAgenda=function(t){S=t,F=z("theme")?"ui":"fc",nt=z("isRTL"),R=St(z("minTime")),N=St(z("maxTime")),rt=z("columnFormat"),at=z("weekNumbers"),ot=z("weekNumberTitle"),it="iso"!=z("weekNumberCalculation")?"w":"W",M=z("snapMinutes")||z("slotMinutes"),(i?_:function(){var t,e,n,r,a,o=F+"-widget-header",i=F+"-widget-content",s=0==z("slotMinutes")%15;for(_(),f=mt("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(l),z("allDaySlot")?(v=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(f),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+z("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+o+" fc-agenda-gutter'>&nbsp;</th></tr></table>",h=mt(t).appendTo(f),P((g=h.find("tr")).find("td")),f.append("<div class='fc-agenda-divider "+o+"'><div class='fc-agenda-divider-inner'/></div>")):v=mt([]),p=mt("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(f),m=mt("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(p),$=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(m),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",e=Mt(),r=wt(Ct(e),N),wt(e,R),n=et=0;e<r;n++)a=e.getMinutes(),t+="<tr class='fc-slot"+n+" "+(a?"fc-minor":"")+"'><th class='fc-agenda-axis "+o+"'>"+(s&&a?"&nbsp;":gt(e,z("axisFormat")))+"</th><td class='"+i+"'><div style='position:relative'>&nbsp;</div></td></tr>",wt(e,z("slotMinutes")),et++;c((y=mt(t+="</tbody></table>").appendTo(m)).find("td"))})()},t.setWidth=function(t){k.clear(),H.clear();var t=n.find("th:first"),t=(t=(t=h?t.add(h.find("th:first")):t).add(y.find("th:first")),w=0,xt(t.width("").each(function(t,e){w=Math.max(w,mt(e).outerWidth())}),w),i.find(".fc-agenda-gutter")),e=(h&&(t=t.add(h.find("th.fc-agenda-gutter"))),p[0].clientWidth);(K=p.width()-e)?(xt(t,K),t.show().prev().removeClass("fc-last")):t.hide().prev().addClass("fc-last"),D=Math.floor((e-w)/S),xt(u.slice(0,-1),D)},t.setHeight=function(t){Q=t=t===yt?Q:t,pt={};var e=r.position().top,n=p.position().top,t=Math.min(t-e,y.height()+n+1);G.height(t-Ht(Z)),f.css("top",e),p.height(t-n-1),C=y.find("tr:first").height()+1,tt=z("slotMinutes")/M,E=C/tt},t.afterRender=function(){function t(){p.scrollTop(r)}var e,n,r;e=Mt(),(n=Ct(e)).setHours(z("firstHour")),r=s(e,n)+1,t(),setTimeout(t,0)},t.defaultEventEnd=function(t){var e=Ct(t.start);return t.allDay?e:wt(e,z("defaultEventMinutes"))},t.timePosition=s,t.getIsCellAllDay=a,t.allDayRow=function(){return g},t.getCoordinateGrid=function(){return T},t.getHoverListener=function(){return x},t.colLeft=function(t){return k.left(t)},t.colRight=function(t){return k.right(t)},t.colContentLeft=function(t){return H.left(t)},t.colContentRight=function(t){return H.right(t)},t.getDaySegmentContainer=function(){return v},t.getSlotSegmentContainer=function(){return $},t.getMinMinute=function(){return R},t.getMaxMinute=function(){return N},t.getSlotContainer=function(){return m},t.getRowCnt=function(){return 1},t.getColCnt=function(){return S},t.getColWidth=function(){return D},t.getSnapHeight=function(){return E},t.getSnapMinutes=function(){return M},t.defaultSelectionEnd=function(t,e){return e?Ct(t):wt(Ct(t),z("slotMinutes"))},t.renderDayOverlay=Y,t.renderSelection=function(t,e,n){n?z("allDaySlot")&&Y(t,bt(Ct(e),1),!0):I(t,e)},t.clearSelection=X,t.reportDayClick=V,t.dragStart=function(t,e){x.start(function(t){lt(),t&&(a(t)?B(t.row,t.col,t.row,t.col):j(t=o(t),wt(Ct(t),z("defaultEventMinutes"))))},e)},t.dragStop=function(t,e,n){var r=x.stop();lt(),r&&W("drop",t,o(r),a(r),e,n)},Bt.call(t,l,O,L),Xt.call(t),It.call(t),function(){function k(t){return t.end?Ct(t.end):wt(Ct(t.start),N("defaultEventMinutes"))}function H(t,e){var n="<",r=t.url,a=_t(t,N),o=["fc-event","fc-event-vert"];return W(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n=(n+=r?"a href='"+Ft(t.url)+"'":"div")+(" class='"+o.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+Ft(ot(t.start,t.end,N("timeFormat")))+"</div><div class='fc-event-title'>"+Ft(t.title||"")+"</div></div><div class='fc-event-bg'></div>"),e.isEnd&&A(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+"</"+(r?"a":"div")+">"}function F(t,e,n){var r,a,o,i,s,l,c,u,d,f,v,h,g,p,m,y,b,w,D,C,M,E,S,T,x,k,H=e.find("div.fc-event-time");function F(){var t,e,n;rt(),g&&(m?(f.hide(),d.draggable("option","grid",null),nt(bt(Ct(u.start),D),bt(Tt(u),D))):(t=C,n=wt(Ct(u.start),t),u.end&&(e=wt(Ct(u.end),t)),f.text(ot(n,e,N("timeFormat"))),f.css("display",""),d.draggable("option","grid",[T,x])))}W(t)&&(u=t,d=e,f=H,E=R.getCoordinateGrid(),S=V(),T=U(),x=Z(),k=G(),d.draggable({scroll:!1,grid:[T,x],axis:1==S&&"y",opacity:N("dragOpacity"),revertDuration:N("dragRevertDuration"),start:function(t,e){z("eventDragStart",d,u,t,e),K(u,d),E.build(),v=d.position(),h=E.cell(t.pageX,t.pageY),g=p=!0,m=y=j(h),b=w=0,C=M=D=0},drag:function(t,e){var n,t=E.cell(t.pageX,t.pageY);(g=!!t)&&(m=j(t),(b=Math.round((e.position.left-v.left)/T))!=w&&(t=J(0,h.col),n=h.col+b,n=Math.max(0,n),n=Math.min(S-1,n),n=J(0,n),D=Et(n,t)),m||(C=Math.round((e.position.top-v.top)/x)*k)),g==p&&m==y&&b==w&&C==M||(F(),p=g,y=m,w=b,M=C),d.draggable("option","revert",!g)},stop:function(t,e){rt(),z("eventDragStop",d,u,t,e),g&&(m||D||C)?tt(this,u,D,m?0:C,m,t,e):(m=!(g=!0),C=D=b=0,F(),d.css("filter",""),d.css(v),Q(u,d))}})),n.isEnd&&A(t)&&(r=t,a=e,o=H,l=Z(),c=G(),a.resizable({handles:{s:".ui-resizable-handle"},grid:l,start:function(t,e){i=s=0,K(r,a),z("eventResizeStart",this,r,t,e)},resize:function(t,e){(i=Math.round((Math.max(l,a.height())-e.originalSize.height)/l))!=s&&(o.text(ot(r.start,i||r.end?wt(O(r),c*i):null,N("timeFormat"))),s=i)},stop:function(t,e){z("eventResizeStop",this,r,t,e),i?et(this,r,0,c*i,t,e):Q(r,a)}})),L(t,e)}var R=this,N=(R.renderEvents=function(t,e){for(var n=t.length,r=[],a=[],o=0;o<n;o++)(t[o].allDay?r:a).push(t[o]);N("allDaySlot")&&(at(r,e),_());var i,s,l,c,u,d,f,v,h,g,p,m,y,b,w,D,C=function(t){var e,n,r,a,o,i=V(),s=Y(),l=q(),c=mt.map(t,k),u=[];for(n=0;n<i;n++)for(wt(e=J(0,n),s),o=function(t){var e,t=function(t){var e,n,r,a=[];for(e=0;t.length>e;e++){for(n=t[e],r=0;a.length>r&&Pt(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}(t),n=t[0];if(function(t){var e,n,r,a,o;for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)for((a=n[r]).forwardSegs=[],o=e+1;t.length>o;o++)Pt(a,t[o],a.forwardSegs)}(t),n){for(e=0;n.length>e;e++)!function t(e){var n,r,a=e.forwardSegs,o=0;if(e.forwardPressure===yt){for(n=0;a.length>n;n++)r=a[n],t(r),o=Math.max(o,1+r.forwardPressure);e.forwardPressure=o}}(n[e]);for(e=0;n.length>e;e++)!function t(e,n,r){var a,o=e.forwardSegs;if(e.forwardCoord===yt)for(o.length?(o.sort(qt),t(o[0],n+1,r),e.forwardCoord=o[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(n+1),a=0;o.length>a;a++)t(o[a],0,e.forwardCoord)}(n[e],0,0)}return function(t){var e,n,r,a=[];for(e=0;t.length>e;e++)for(n=t[e],r=0;n.length>r;r++)a.push(n[r]);return a}(t)}(o=function(t,e,n,r){var a,o,i,s,l,c,u=[],d=t.length;for(a=0;a<d;a++)o=t[a],l=o.start,(c=e[a])>n&&l<r&&(l=l<n?(i=Ct(n),!1):(i=l,!0),c=r<c?(s=Ct(r),!1):(s=c,!0),u.push({event:o,start:i,end:s,isStart:l,isEnd:c}));return u.sort(Yt)}(t,c,e,wt(Ct(e),l-s))),r=0;o.length>r;r++)(a=o[r]).col=n,u.push(a);return u}(a),M=e,E=C.length,S="",T=P(),x=N("isRTL");for(i=0;i<E;i++)s=C[i],l=s.event,c=B(s.start,s.start),u=B(s.start,s.end),d=I(s.col),f=X(s.col),h=(v=(f-=.025*(v=f-d))-d)*(s.forwardCoord-s.backwardCoord),N("slotEventOverlap")&&(h=Math.max(2*(h-10),h)),x?(p=f-s.backwardCoord*v,g=p-h):(g=d+s.backwardCoord*v,p=g+h),g=Math.max(g,d),p=Math.min(p,f),h=p-g,s.top=c,s.left=g,s.outerWidth=h,s.outerHeight=u-c,S+=H(l,s);for(T[0].innerHTML=S,m=T.children(),i=0;i<E;i++)s=C[i],l=s.event,y=mt(m[i]),!1===(b=z("eventRender",l,l,y))?y.remove():(b&&!0!==b&&(y.remove(),y=mt(b).css({position:"absolute",top:s.top,left:s.left}).appendTo(T)),s.element=y,l._id===M?F(l,y,s):y[0]._fci=i,$(l,y));for(At(T,C,F),i=0;i<E;i++)s=C[i],(y=s.element)&&(s.vsides=Ht(y,!0),s.hsides=kt(y,!0),(w=y.find(".fc-event-title")).length)&&(s.contentTop=w[0].offsetTop);for(i=0;i<E;i++)s=C[i],(y=s.element)&&(y[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",D=Math.max(0,s.outerHeight-s.vsides),y[0].style.height=D+"px",l=s.event,s.contentTop!==yt&&D-s.contentTop<10&&(y.find("div.fc-event-time").text(it(l.start,N("timeFormat"))+" - "+l.title),y.find("div.fc-event-title").remove()),z("eventAfterRender",l,l,y))},R.clearEvents=function(){t().empty(),P().empty()},R.slotSegHtml=H,jt.call(R),R.opt),z=R.trigger,W=R.isEventDraggable,A=R.isEventResizable,O=R.eventEnd,L=R.eventElementHandlers,_=R.setHeight,t=R.getDaySegmentContainer,P=R.getSlotSegmentContainer,e=R.getHoverListener,q=R.getMaxMinute,Y=R.getMinMinute,B=R.timePosition,j=R.getIsCellAllDay,I=R.colContentLeft,X=R.colContentRight,J=R.cellToDate,V=R.getColCnt,U=R.getColWidth,Z=R.getSnapHeight,G=R.getSnapMinutes,g=R.getSlotContainer,$=R.reportEventElement,Q=R.showEvents,K=R.hideEvents,tt=R.eventDrop,et=R.eventResize,nt=R.renderDayOverlay,rt=R.clearOverlays,at=R.renderDayEvents,n=R.calendar,it=n.formatDate,ot=n.formatDates;R.draggableDayEvent=function(r,a,t){function o(){c||(a.width(n).height("").draggable("option","grid",null),c=!0)}var n,i,s,l=t.isStart,c=!0,u=e(),d=U(),f=Z(),v=G(),h=Y();a.draggable({opacity:N("dragOpacity","month"),revertDuration:N("dragRevertDuration"),start:function(t,e){z("eventDragStart",a,r,t,e),K(r,a),n=a.width(),u.start(function(t,e){var n;rt(),i=t?(i=!1,e=J(0,e.col),n=J(0,t.col),s=Et(n,e),t.row?l?c&&(a.width(d-10),Ot(a,f*Math.round((r.end?(r.end-r.start)/Ut:N("defaultEventMinutes"))/v)),a.draggable("option","grid",[d,1]),c=!1):i=!0:(nt(bt(Ct(r.start),s),bt(Tt(r),s)),o()),i||c&&!s):(o(),!0),a.draggable("option","revert",i)},t,"drag")},stop:function(t,e){var n;u.stop(),rt(),z("eventDragStop",a,r,t,e),i?(o(),a.css("filter",""),Q(r,a)):(n=0,c||(n=Math.round((a.offset().top-g().offset().top)/f)*v+h-(60*r.start.getHours()+r.start.getMinutes())),tt(this,r,s,n,c,t,e))}})}}.call(t);var i,n,u,r,d,e,U,Z,G,f,v,h,g,p,m,$,y,b,Q,w,D,K,C,M,tt,E,S,et,T,x,k,H,F,nt,R,N,rt,at,ot,it,z=t.opt,W=t.trigger,st=t.renderOverlay,lt=t.clearOverlays,ct=t.reportSelection,ut=t.unselect,dt=t.daySelectionMousedown,ft=t.slotSegHtml,A=t.cellToDate,vt=t.dateToCell,ht=t.rangeToSegments,gt=O.formatDate,pt={};Rt(l.addClass("fc-agenda")),T=new Jt(function(t,n){function e(t){return Math.max(s,Math.min(l,t))}var r,a,o;u.each(function(t,e){r=mt(e),a=r.offset().left,t&&(o[1]=a),o=[a],n[t]=o}),o[1]=a+r.outerWidth(),z("allDaySlot")&&(a=(r=g).offset().top,t[0]=[a,a+r.outerHeight()]);for(var i=m.offset().top,s=p.offset().top,l=s+p.outerHeight(),c=0;c<et*tt;c++)t.push([e(i+E*c),e(i+E*(c+1))])}),x=new Vt(T),k=new zt(function(t){return e.eq(t)}),H=new zt(function(t){return U.eq(t)})}function Pt(t,e,n){n=n||[];for(var r,a,o=0;e.length>o;o++)r=t,a=e[o],r.end>a.start&&r.start<a.end&&n.push(e[o]);return n}function qt(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||Yt(t,e)}function Yt(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function Bt(t,n,r){function a(t,e){t=C[t];return mt.isPlainObject(t)?R(t,e||r):t}function c(t,e){return n.trigger.apply(n,[t,e||y].concat(Array.prototype.slice.call(arguments,2),[y]))}function i(t){return t.end?Ct(t.end):d(t)}function o(t,e,n){for(var r=w[t._id],a=r.length,o=0;o<a;o++)e&&r[o][0]==e[0]||r[o][n]()}function u(t,e,n,r){n=n||0;for(var a,o=t.length,i=0;i<o;i++)a=t[i],r!==yt&&(a.allDay=r),wt(bt(a.start,e,!0),n),a.end&&(a.end=wt(bt(a.end,e,!0),n)),f(a,C)}function s(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=wt(bt(i(r),e,!0),n),f(r,C)}function e(t,e){var n=y.getColCnt();return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*(k?-1:1)+(k?n-1:0))}function h(t){var e=y.visStart.getDay();return t+=T[e],7*Math.floor(t/M)+x[(t%M+M)%M]-e}function l(t){var e=Ct(y.visStart);return bt(e,t),e}function g(t){return Et(t,y.visStart)}function p(t){var e=y.visStart.getDay();return t+=e,Math.floor(t/7)*M+T[(t%7+7)%7]-T[e]}function m(t){var e=y.getColCnt(),n=k?-1:1,r=k?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}var y=this,d=(y.element=t,y.calendar=n,y.name=r,y.opt=a,y.trigger=c,y.isEventDraggable=function(t){var e=t.source||{};return I(t.startEditable,e.startEditable,a("eventStartEditable"),t.editable,e.editable,a("editable"))&&!a("disableDragging")},y.isEventResizable=function(t){var e=t.source||{};return I(t.durationEditable,e.durationEditable,a("eventDurationEditable"),t.editable,e.editable,a("editable"))&&!a("disableResizing")},y.setEventData=function(t){b={};for(var e,n=t.length,r=0;r<n;r++)e=t[r],b[e._id]?b[e._id].push(e):b[e._id]=[e]},y.clearEventData=function(){b={},w={},D=[]},y.eventEnd=i,y.reportEventElement=function(t,e){D.push({event:t,element:e}),w[t._id]?w[t._id].push(e):w[t._id]=[e]},y.triggerEventDestroy=function(){mt.each(D,function(t,e){y.trigger("eventDestroy",e.event,e.event,e.element)})},y.eventElementHandlers=function(e,n){n.click(function(t){return n.hasClass("ui-draggable-dragging")||n.hasClass("ui-resizable-resizing")?yt:c("eventClick",this,e,t)}).hover(function(t){c("eventMouseover",this,e,t)},function(t){c("eventMouseout",this,e,t)})},y.showEvents=function(t,e){o(t,e,"show")},y.hideEvents=function(t,e){o(t,e,"hide")},y.eventDrop=function(t,e,n,r,a,o,i){var s=e.allDay,l=e._id;u(b[l],n,r,a),c("eventDrop",t,e,n,r,a,function(){u(b[l],-n,-r,s),v(l)},o,i),v(l)},y.eventResize=function(t,e,n,r,a,o){var i=e._id;s(b[i],n,r),c("eventResize",t,e,n,r,function(){s(b[i],-n,-r),v(i)},a,o),v(i)},y.defaultEventEnd),f=n.normalizeEvent,v=n.reportEventChange,b={},w={},D=[],C=n.options;y.isHiddenDay=function(t){return"object"==typeof t&&(t=t.getDay()),S[t]},y.skipHiddenDays=function(t,e,n){for(e=e||1;S[(t.getDay()+(n?e:0)+7)%7];)bt(t,e)},y.getCellsPerWeek=function(){return M},y.dateToCell=function(t){return m(p(g(t)))},y.dateToDayOffset=g,y.dayOffsetToCellOffset=p,y.cellOffsetToCell=m,y.cellToDate=function(){return l(h(e.apply(null,arguments)))},y.cellToCellOffset=e,y.cellOffsetToDayOffset=h,y.dayOffsetToDate=l,y.rangeToSegments=function(t,e){for(var n=y.getRowCnt(),r=y.getColCnt(),a=[],o=g(t),i=g(e),s=p(o),l=p(i)-1,c=0;c<n;c++){var u,d,f=c*r,v=f+r-1,f=Math.max(s,f),v=Math.min(l,v);f<=v&&(u=m(f),d=m(v),u=[u.col,d.col].sort(),d=h(f)==o,f=h(v)+1==i,a.push({row:c,leftCol:u[0],rightCol:u[1],isStart:d,isEnd:f}))}return a};var M,E=a("hiddenDays")||[],S=[],T=[],x=[],k=a("isRTL");!1===a("weekends")&&E.push(0,6);for(var H=0,F=0;H<7;H++)T[H]=F,S[H]=-1!=mt.inArray(H,E),S[H]||(x[F]=H,F++);if(!(M=F))throw"invalid hiddenDays"}function jt(){function v(t,e,n){for(var r,a=z(),o=e?mt("<div/>"):a,t=function(t){for(var e=[],n=0;t.length>n;n++){var r=function(t){for(var e=t.start,n=Tt(t),r=A(e,n),a=0;r.length>a;a++)r[a].event=t;return r}(t[n]);e.push.apply(e,r)}return e}(t),i=t,s=C("isRTL"),l=0;i.length>l;l++){var c=i[l],u=(s?c.isEnd:c.isStart)?R:H,d=(s?c.isStart:c.isEnd)?N:F,u=u(c.leftCol),d=d(c.rightCol);c.left=u,c.outerWidth=d-u}r=function(t){for(var e="",n=0;t.length>n;n++)e+=function(t){var e="",n=C("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"],i=(E(r)&&o.push("fc-event-draggable"),t.isStart&&o.push("fc-event-start"),t.isEnd&&o.push("fc-event-end"),o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[])),_t(r,C));return e=(e+=a?"<a href='"+Ft(a)+"'":"<div")+" class='"+o.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+Ft(W(r.start,r.end,C("timeFormat")))+"</span>"),e+="<span class='fc-event-title'>"+Ft(r.title||"")+"</span></div>",t.isEnd&&S(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),e+="</"+(a?"a":"div")+">"}(t[n]);return e}(t),o[0].innerHTML=r,r=o.children(),e&&a.append(r);for(var f=t,v=r,h=0;f.length>h;h++){var g=f[h],p=g.event,m=v.eq(h),p=M("eventRender",p,p,m);!1===p?m.remove():(p&&!0!==p&&(p=mt(p).css({position:"absolute",left:g.left}),m.replaceWith(p),m=p),g.element=m)}X(t,function(t,e){t.hsides=kt(e,!0)}),X(t,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),X(t,function(t,e){t.outerHeight=e.outerHeight(!0)});var o=t,e=n,y=function(t){for(var e=T(),n=x(),r=[],a=function(t){var e,n,r,a=T(),o=[];for(e=0;t.length>e;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=function(t){for(var e=[],n=function(t){t.sort(G);for(var e=[],n=0;t.length>n;n++){for(var r=t[n],a=0;e.length>a&&function(t,e){for(var n=0;e.length>n;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return 1}return}(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}(t),r=0;n.length>r;r++)e.push.apply(e,n[r]);return e}(o[r]||[]);return o}(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;i.length>c;c++){var u=i[c];u.top=Z(s.slice(u.leftCol,u.rightCol+1));for(l=u.leftCol;u.rightCol>=l;l++)s[l]=u.top+u.outerHeight}r.push(Z(s))}return r}(o),b=function(){var t,e=T(),n=[];for(t=0;t<e;t++)n[t]=k(t).find("div.fc-day-content > div");return n}(),w=[];if(e)for(var D=0;b.length>D;D++)b[D].height(y[D]);for(D=0;b.length>D;D++)w.push(b[D].position().top);return X(o,function(t,e){e.css("top",w[t.row]+t.top)}),t}function o(t,e,n){E(t)&&r.draggableDayEvent(t,e,n),n.isEnd&&S(t)&&r.resizableDayEvent(t,e,n),a(t,e)}var r=this,C=(r.renderDayEvents=function(t,e){var n,a;X(t=v(t,!1,!0),function(t,e){i(t.event,e)}),n=t,a=e,e=z(),X(n,function(t,e,n){var r=t.event;r._id===a?o(r,e,t):e[0]._fci=n}),At(e,n,o),X(t,function(t,e){M("eventAfterRender",t.event,t.event,e)})},r.draggableDayEvent=function(a,o){var i,n=D();o.draggable({delay:50,opacity:C("dragOpacity"),revertDuration:C("dragRevertDuration"),start:function(t,e){M("eventDragStart",o,a,t,e),p(a,o),n.start(function(t,e,n,r){o.draggable("option","revert",!t||!n&&!r),b(),t?(n=l(e),r=l(t),i=Et(r,n),y(bt(Ct(a.start),i),bt(Tt(a),i))):i=0},t,"drag")},stop:function(t,e){n.stop(),b(),M("eventDragStop",o,a,t,e),i?s(this,a,i,0,a.allDay,t,e):(o.css("filter",""),g(a,o))}})},r.resizableDayEvent=function(u,n,d){var f=C("isRTL")?"w":"e",t=n.find(".ui-resizable-"+f),r=!1;Rt(n),n.mousedown(function(t){t.preventDefault()}).click(function(t){r&&(t.preventDefault(),t.stopImmediatePropagation())}),t.mousedown(function(t){var e,o,i,s,l,c;1==t.which&&(r=!0,e=D(),T(),x(),s=n.css("top"),l=mt.extend({},u),c=P(_(u.start)),w(),mt("body").css("cursor",f+"-resize").one("mouseup",function(t){M("eventResizeStop",this,u,t),mt("body").css("cursor",""),e.stop(),b(),o&&m(this,u,o,0,t),setTimeout(function(){r=!1},0)}),M("eventResizeStart",this,u,t),e.start(function(t,e){var n,r,a;t&&(e=O(e),t=O(t),t=Math.max(t,c),(o=L(t)-L(e))?(l.end=bt(h(u),o,!0),t=i,e=l,n=d.row,r=s,e=v([l],!0,!1),a=[],X(e,function(t,e){t.row===n&&e.css("top",r),a.push(e[0])}),(i=mt(i=a)).find("*").css("cursor",f+"-resize"),t&&t.remove(),p(u)):i&&(g(u),i.remove(),i=null),b(),y(u.start,bt(Tt(u),o)))},t))})},r.opt),M=r.trigger,E=r.isEventDraggable,S=r.isEventResizable,h=r.eventEnd,i=r.reportEventElement,a=r.eventElementHandlers,g=r.showEvents,p=r.hideEvents,s=r.eventDrop,m=r.eventResize,T=r.getRowCnt,x=r.getColCnt,k=(r.getColWidth,r.allDayRow),H=r.colLeft,F=r.colRight,R=r.colContentLeft,N=r.colContentRight,z=(r.dateToCell,r.getDaySegmentContainer),W=r.calendar.formatDates,y=r.renderDayOverlay,b=r.clearOverlays,w=r.clearSelection,D=r.getHoverListener,A=r.rangeToSegments,l=r.cellToDate,O=r.cellToCellOffset,L=r.cellOffsetToDayOffset,_=r.dateToDayOffset,P=r.dayOffsetToCellOffset}function X(t,e){for(var n=0;t.length>n;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function G(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function It(){function i(t){o&&(o=!1,d(),a("unselect",null,t))}function s(t,e,n,r){o=!0,a("select",null,t,e,n,r)}var l=this,c=(l.select=function(t,e,n){i(),e=e||r(t,n),u(t,e,n),s(t,e,n)},l.unselect=i,l.reportSelection=s,l.daySelectionMousedown=function(t){var n,r=l.cellToDate,a=l.getIsCellAllDay,e=l.getHoverListener(),o=l.reportDayClick;1==t.which&&c("selectable")&&(i(t),e.start(function(t,e){d(),t&&a(t)?(n=[r(e),r(t)].sort(Lt),u(n[0],n[1],!0)):n=null},t),mt(document).one("mouseup",function(t){e.stop(),n&&(+n[0]==+n[1]&&o(n[0],!0,t),s(n[0],n[1],!0,t))}))},l.opt),a=l.trigger,r=l.defaultSelectionEnd,u=l.renderSelection,d=l.clearSelection,o=!1;c("selectable")&&c("unselectAuto")&&mt(document).mousedown(function(t){var e=c("unselectCancel");e&&mt(t.target).parents(e).length||i(t)})}function Xt(){this.renderOverlay=function(t,e){var n=a.shift();return(n=n||mt("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"))[0].parentNode!=e[0]&&n.appendTo(e),r.push(n.css(t).show()),n},this.clearOverlays=function(){for(var t;t=r.shift();)a.push(t.hide().unbind())};var r=[],a=[]}function Jt(t){var s,l;this.build=function(){t(s=[],l=[])},this.cell=function(t,e){for(var n=s.length,r=l.length,a=-1,o=-1,i=0;i<n;i++)if(e>=s[i][0]&&s[i][1]>e){a=i;break}for(i=0;i<r;i++)if(t>=l[i][0]&&l[i][1]>t){o=i;break}return 0<=a&&0<=o?{row:a,col:o}:null},this.rect=function(t,e,n,r,a){a=a.offset();return{top:s[t][0]-a.top,left:l[e][0]-a.left,width:l[r][1]-l[e][0],height:s[n][1]-s[t][0]}}}function Vt(r){function a(t){(e=t).pageX===yt&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY);var e=r.cell(t.pageX,t.pageY);!e==!l&&(!e||e.row==l.row&&e.col==l.col)||(e?i(e,s=s||e,e.row-s.row,e.col-s.col):i(e,s),l=e)}var o,i,s,l;this.start=function(t,e,n){i=t,s=l=null,r.build(),a(e),o=n||"mousemove",mt(document).bind(o,a)},this.stop=function(){return mt(document).unbind(o,a),l}}function zt(e){function n(t){return a[t]=a[t]||e(t)}var r=this,a={},o={},i={};r.left=function(t){return o[t]=o[t]===yt?n(t).position().left:o[t]},r.right=function(t){return i[t]=i[t]===yt?r.left(t)+n(t).width():i[t]},r.clear=function(){a={},o={},i={}}}var h={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},i={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},J=mt.fullCalendar={version:"1.6.4"},V=J.views={},$=(mt.fn.fullCalendar=function(r){var e,n,a;return"string"==typeof r?(n=Array.prototype.slice.call(arguments,1),this.each(function(){var t=mt.data(this,"fullCalendar");t&&mt.isFunction(t[r])&&(t=t[r].apply(t,n),e===yt&&(e=t),"destroy"==r)&&mt.removeData(this,"fullCalendar")}),e!==yt?e:this):(a=(r=r||{}).eventSources||[],delete r.eventSources,r.events&&(a.push(r.events),delete r.events),r=mt.extend(!0,{},h,r.isRTL||r.isRTL===yt&&h.isRTL?i:{},r),this.each(function(t,e){var e=mt(e),n=new o(e,r,a);e.data("fullCalendar",n),n.render()}),this)},J.sourceNormalizers=[],{dataType:"json",cache:!(J.sourceFetchers=[])}),Q=1,Wt=(J.addDays=bt,J.cloneDate=Ct,J.parseDate=P,J.parseISO8601=B,J.parseTime=St,J.formatDate=q,J.formatDates=Y,["sun","mon","tue","wed","thu","fri","sat"]),r=864e5,s=36e5,Ut=6e4,g={s:function(t){return t.getSeconds()},ss:function(t){return e(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return e(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return e(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return e(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return e(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return e(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return q(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){t=t.getDate();return!(10<t&&t<20)&&["st","nd","rd"][t%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return t=t,(t=new Date(t.getTime())).setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1;var e}};J.dateFormatters=g,J.applyAll=j,V.month=function(t,e){var i=this,s=(i.render=function(t,e){e&&(L(t,e),t.setDate(1));var e=s("firstDay"),n=((t=Ct(t,!0)).setDate(1),L(Ct(t),1)),r=Ct(t),a=(bt(r,-(r.getDay()-e+7)%7),c(r),Ct(n)),e=(bt(a,(7-a.getDay()+e)%7),c(a,-1,!0),u()),o=Math.round(Et(a,r)/7);"fixed"==s("weekMode")&&(bt(a,7*(6-o)),o=6),i.title=d(t,s("titleFormat")),i.start=t,i.end=n,i.visStart=r,i.visEnd=a,l(o,e,!0)},n.call(i,t,e,"month"),i.opt),l=i.renderBasic,c=i.skipHiddenDays,u=i.getCellsPerWeek,d=e.formatDate},V.basicWeek=function(t,e){var o=this,i=(o.render=function(t,e){e&&bt(t,7*e);var e=bt(Ct(t),-(t.getDay()-i("firstDay")+7)%7),t=bt(Ct(e),7),n=Ct(e),r=(l(n),Ct(t)),a=(l(r,-1,!0),c());o.start=e,o.end=t,o.visStart=n,o.visEnd=r,o.title=u(n,bt(Ct(r),-1),i("titleFormat")),s(1,a,!1)},n.call(o,t,e,"basicWeek"),o.opt),s=o.renderBasic,l=o.skipHiddenDays,c=o.getCellsPerWeek,u=e.formatDates},V.basicDay=function(t,e){var r=this,a=(r.render=function(t,e){e&&bt(t,e),i(t,e<0?-1:1);var e=Ct(t,!0),n=bt(Ct(e),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=e,r.end=r.visEnd=n,o(1,1,!1)},n.call(r,t,e,"basicDay"),r.opt),o=r.renderBasic,i=r.skipHiddenDays,s=e.formatDate},t({weekMode:"fixed"}),V.agendaWeek=function(t,e){var o=this,i=(o.render=function(t,e){e&&bt(t,7*e);var e=bt(Ct(t),-(t.getDay()-i("firstDay")+7)%7),t=bt(Ct(e),7),n=Ct(e),r=(l(n),Ct(t)),a=(l(r,-1,!0),c());o.title=u(n,bt(Ct(r),-1),i("titleFormat")),o.start=e,o.end=t,o.visStart=n,o.visEnd=r,s(a)},d.call(o,t,e,"agendaWeek"),o.opt),s=o.renderAgenda,l=o.skipHiddenDays,c=o.getCellsPerWeek,u=e.formatDates},V.agendaDay=function(t,e){var r=this,a=(r.render=function(t,e){e&&bt(t,e),i(t,e<0?-1:1);var e=Ct(t,!0),n=bt(Ct(e),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=e,r.end=r.visEnd=n,o(1)},d.call(r,t,e,"agendaDay"),r.opt),o=r.renderAgenda,i=r.skipHiddenDays,s=e.formatDate},t({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);