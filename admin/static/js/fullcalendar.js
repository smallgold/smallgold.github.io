!function(mt,yt){var h={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},o={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},O=mt.fullCalendar={version:"1.6.4"},L=O.views={};function t(t){mt.extend(!0,h,t)}function i(e,o,t){var n,r,a,i,s,l,c,u=this,d=(u.options=o,u.render=function(t){a?b()&&(S(),M(t)):function(){o.theme,e.addClass("fc"),o.isRTL?e.addClass("fc-rtl"):e.addClass("fc-ltr");o.theme&&e.addClass("ui-widget");a=mt("<div class='fc-content' style='position:relative'/>").prependTo(e),n=new U(u,o),(r=n.render())&&e.prepend(r);D(o.defaultView),o.handleWindowResize&&mt(window).resize(x);w()||y()}()},u.destroy=function(){i&&(A("viewDestroy",i,i,i.element),i.triggerEventDestroy());mt(window).unbind("resize",x),n.destroy(),a.remove(),e.removeClass("fc fc-rtl ui-widget")},u.refetchEvents=function(){F(),R()},u.reportEvents=function(t){m=t,H()},u.reportEventChange=function(t){k(t)},u.rerenderEvents=k,u.changeView=D,u.select=function(t,e,n){i.select(t,e,n===yt||n)},u.unselect=N,u.prev=function(){C(-1)},u.next=function(){C(1)},u.prevYear=function(){_(p,-1),C()},u.nextYear=function(){_(p,1),C()},u.today=function(){p=new Date,C()},u.gotoDate=function(t,e,n){t instanceof Date?p=Mt(t):q(p,t,e,n);C()},u.incrementDate=function(t,e,n){t!==yt&&_(p,t);e!==yt&&P(p,e);n!==yt&&wt(p,n);C()},u.formatDate=function(t,e){return j(t,e,o)},u.formatDates=function(t,e,n){return I(t,e,n,o)},u.getDate=function(){return Mt(p)},u.getView=function(){return i},u.option=function(t,e){if(e===yt)return o[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(o[t]=e,E())},u.trigger=A,!function(f,t){for(var v,h,e=this,n=(e.isFetchNeeded=function(t,e){return!v||t<v||h<e},e.fetchEvents=function(t,e){v=t,h=e,u=[];var n=++i,r=o.length;c=r;for(var a=0;a<r;a++)g(o[a],n)},e.addEventSource=function(t){(t=p(t))&&(c++,g(t,i))},e.removeEventSource=function(e){o=mt.grep(o,function(t){return!w(t,e)}),u=mt.grep(u,function(t){return!w(t.source,e)}),l(u)},e.updateEvent=function(t){var e,n,r=u.length,a=s().defaultEventEnd,o=t.start-t._start,i=t.end?t.end-(t._end||a(t)):0;for(e=0;e<r;e++)(n=u[e])._id==t._id&&n!=t&&(n.start=new Date(+n.start+o),t.end?n.end?n.end=new Date(+n.end+i):n.end=new Date(+a(n)+i):n.end=null,n.title=t.title,n.url=t.url,n.allDay=t.allDay,n.className=t.className,n.editable=t.editable,n.color=t.color,n.backgroundColor=t.backgroundColor,n.borderColor=t.borderColor,n.textColor=t.textColor,b(n));b(t),l(u)},e.renderEvent=function(t,e){b(t),t.source||(e&&(r.events.push(t),t.source=r),u.push(t));l(u)},e.removeEvents=function(t){if(t){var e;mt.isFunction(t)||(e=t+"",t=function(t){return t._id==e}),u=mt.grep(u,t,!0);for(n=0;n<o.length;n++)mt.isArray(o[n].events)&&(o[n].events=mt.grep(o[n].events,t,!0))}else{u=[];for(var n=0;n<o.length;n++)mt.isArray(o[n].events)&&(o[n].events=[])}l(u)},e.clientEvents=function(e){{if(mt.isFunction(e))return mt.grep(u,e);if(e)return e+="",mt.grep(u,function(t){return t._id==e})}return u},e.normalizeEvent=b,e.trigger),s=e.getView,l=e.reportEvents,r={events:[]},o=[r],i=0,c=0,a=0,u=[],d=0;d<t.length;d++)p(t[d]);function g(n,r){!function t(e,n){var r;var a=O.sourceFetchers;var o;for(r=0;r<a.length;r++){if(!0===(o=a[r](e,v,h,n)))return;if("object"==typeof o)return void t(o,n)}var i=e.events;{var s,l,c,u,d;i?mt.isFunction(i)?(m(),i(Mt(v),Mt(h),function(t){n(t),y()})):mt.isArray(i)?n(i):n():e.url?(s=e.success,l=e.error,c=e.complete,i=mt.isFunction(e.data)?e.data():e.data,i=mt.extend({},i||{}),u=J(e.startParam,f.startParam),d=J(e.endParam,f.endParam),u&&(i[u]=Math.round(+v/1e3)),d&&(i[d]=Math.round(+h/1e3)),m(),mt.ajax(mt.extend({},Z,e,{data:i,success:function(t){t=t||[];var e=X(s,this,arguments);mt.isArray(e)&&(t=e),n(t)},error:function(){X(l,this,arguments),n()},complete:function(){X(c,this,arguments),y()}}))):n()}}(n,function(t){if(r==i){if(t){f.eventDataTransform&&(t=mt.map(t,f.eventDataTransform)),n.eventDataTransform&&(t=mt.map(t,n.eventDataTransform));for(var e=0;e<t.length;e++)t[e].source=n,b(t[e]);u=u.concat(t)}--c||l(u)}})}function p(t){if(mt.isFunction(t)||mt.isArray(t)?t={events:t}:"string"==typeof t&&(t={url:t}),"object"==typeof t){var e=t;e.className?"string"==typeof e.className&&(e.className=e.className.split(/\s+/)):e.className=[];for(var n=O.sourceNormalizers,r=0;r<n.length;r++)n[r](e);return o.push(t),t}}function m(){a++||n("loading",null,!0,s())}function y(){--a||n("loading",null,!1,s())}function b(t){var e=t.source||{},n=J(e.ignoreTimezone,f.ignoreTimezone);t._id=t._id||(t.id===yt?"_fc"+G++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=Mt(t.start=Y(t.start,n)),t.end=Y(t.end,n),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?Mt(t.end):null,t.allDay===yt&&(t.allDay=J(e.allDayDefault,f.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function w(t,e){return t&&e&&D(t)==D(e)}function D(t){return("object"==typeof t?t.events||t.url:"")||t}}.call(u,o,t),u.isFetchNeeded),f=u.fetchEvents,v=e[0],h=0,g=0,p=new Date,m=[];function y(){setTimeout(function(){!i.start&&w()&&C()},0)}function b(){return e.is(":visible")}function w(){return mt("body").is(":visible")}function D(t){i&&t==i.name||(t=t,g++,i&&(A("viewDestroy",i,i,i.element),N(),i.triggerEventDestroy(),z(),i.element.remove(),n.deactivateButton(i.name)),n.activateButton(t),i=new L[t](mt("<div class='fc-view fc-view-"+t+"' style='position:relative'/>").appendTo(a),u),C(),W(),g--)}function C(t){(!i.start||t||p<i.start||p>=i.end)&&b()&&M(t)}function M(t){g++,i.start&&(A("viewDestroy",i,i,i.element),N(),F()),z(),i.render(p,t||0),T(),W(),(i.afterRender||function(){})(),n.updateTitle(i.title),(t=new Date)>=i.start&&t<i.end?n.disableButton("today"):n.enableButton("today"),A("viewRender",i,i,i.element),i.trigger("viewDisplay",v),g--,(!o.lazyFetching||d(i.visStart,i.visEnd)?R:H)()}function E(){b()&&(N(),F(),S(),T(),H())}function S(){l=o.contentHeight||(o.height?o.height-(r?r.height():0)-Ft(a):Math.round(a.width()/Math.max(o.aspectRatio,.5)))}function T(){l===yt&&S(),g++,i.setHeight(l),i.setWidth(a.width()),g--,s=e.outerWidth()}function x(){var t;g||(i.start?(t=++h,setTimeout(function(){t==h&&!g&&b()&&s!=(s=e.outerWidth())&&(g++,E(),i.trigger("windowResize",v),g--)},200)):y())}function k(t){F(),H(t)}function H(t){b()&&(i.setEventData(m),i.renderEvents(m,t),i.trigger("eventAfterAllRender"))}function F(){i.triggerEventDestroy(),i.clearEvents(),i.clearEventData()}function R(){f(i.visStart,i.visEnd)}function N(){i&&i.unselect()}function z(){a.css({width:"100%",height:a.height(),overflow:"hidden"})}function W(){a.css({width:"",height:"",overflow:""})}function A(t,e){if(o[t])return o[t].apply(e||v,Array.prototype.slice.call(arguments,2))}q(p,o.year,o.month,o.date),o.droppable&&mt(document).bind("dragstart",function(t,e){var n,r=t.target,a=mt(r);!a.parents(".fc").length&&(n=o.dropAccept,mt.isFunction(n)?n.call(r,a):a.is(n))&&(c=r,i.dragStart(c,t,e))}).bind("dragstop",function(t,e){c&&(i.dragStop(c,t,e),c=null)})}function U(l,c){var u,t=this,e=(t.render=function(){if(u=c.theme?"ui":"fc",c.header)return e=mt("<table class='fc-header' style='width:100%'/>").append(mt("<tr/>").append(n("left")).append(n("center")).append(n("right")))},t.destroy=function(){e.remove()},t.updateTitle=function(t){e.find("h2").html(t)},t.activateButton=function(t){e.find("span.fc-button-"+t).addClass(u+"-state-active")},t.deactivateButton=function(t){e.find("span.fc-button-"+t).removeClass(u+"-state-active")},t.disableButton=function(t){e.find("span.fc-button-"+t).addClass(u+"-state-disabled")},t.enableButton=function(t){e.find("span.fc-button-"+t).removeClass(u+"-state-disabled")},mt([]));function n(t){var s=mt("<td class='fc-header-"+t+"'/>"),t=c.header[t];return t&&mt.each(t.split(" "),function(t){var i;0<t&&s.append("<span class='fc-header-space'/>"),mt.each(this.split(","),function(t,e){var n,r,a,o;"title"==e?(s.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),i&&i.addClass(u+"-corner-right"),i=null):(l[e]?n=l[e]:L[e]&&(n=function(){o.removeClass(u+"-state-hover"),l.changeView(e)}),n&&(r=c.theme?R(c.buttonIcons,e):null,a=R(c.buttonText,e),Nt(o=mt("<span class='fc-button fc-button-"+e+" "+u+"-state-default'>"+(r?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+r+"'/></span>":a)+"</span>").click(function(){o.hasClass(u+"-state-disabled")||n()}).mousedown(function(){o.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-down")}).mouseup(function(){o.removeClass(u+"-state-down")}).hover(function(){o.not("."+u+"-state-active").not("."+u+"-state-disabled").addClass(u+"-state-hover")},function(){o.removeClass(u+"-state-hover").removeClass(u+"-state-down")}).appendTo(s)),i||o.addClass(u+"-corner-left"),i=o))}),i&&i.addClass(u+"-corner-right")}),s}}mt.fn.fullCalendar=function(r){var e,n,a;return"string"==typeof r?(e=Array.prototype.slice.call(arguments,1),this.each(function(){var t=mt.data(this,"fullCalendar");t&&mt.isFunction(t[r])&&(t=t[r].apply(t,e),n===yt&&(n=t),"destroy"==r)&&mt.removeData(this,"fullCalendar")}),n!==yt?n:this):(a=(r=r||{}).eventSources||[],delete r.eventSources,r.events&&(a.push(r.events),delete r.events),r=mt.extend(!0,{},h,r.isRTL||r.isRTL===yt&&h.isRTL?o:{},r),this.each(function(t,e){var e=mt(e),n=new i(e,r,a);e.data("fullCalendar",n),n.render()}),this)},O.sourceNormalizers=[];var Z={dataType:"json",cache:!(O.sourceFetchers=[])},G=1;O.addDays=wt,O.cloneDate=Mt,O.parseDate=Y,O.parseISO8601=B,O.parseTime=Tt,O.formatDate=j,O.formatDates=I;var bt=["sun","mon","tue","wed","thu","fri","sat"],r=864e5,s=36e5,At=6e4;function _(t,e,n){t.setFullYear(t.getFullYear()+e),n||Ct(t)}function P(t,e,n){if(+t){var e=t.getMonth()+e,r=Mt(t);for(r.setDate(1),r.setMonth(e),t.setMonth(e),n||Ct(t);t.getMonth()!=r.getMonth();)t.setDate(t.getDate()+(t<r?1:-1))}return t}function wt(t,e,n){var r;return+t&&(e=t.getDate()+e,(r=Mt(t)).setHours(9),r.setDate(e),t.setDate(e),n||Ct(t),a(t,r)),t}function a(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(t<e?1:-1)*s)}function Dt(t,e){return t.setMinutes(t.getMinutes()+e),t}function Ct(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function Mt(t,e){return e?Ct(new Date(+t)):new Date(+t)}function Et(){for(var t,e=0;(t=new Date(1970,e++,1)).getHours(););return t}function St(t,e){return Math.round((Mt(t,!0)-Mt(e,!0))/r)}function q(t,e,n,r){e!==yt&&e!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(e)),n!==yt&&n!=t.getMonth()&&(t.setDate(1),t.setMonth(n)),r!==yt&&t.setDate(r)}function Y(t,e){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):B(t,e=e===yt?!0:e)||(t?new Date(t):null):null}function B(t,e){var n,t=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);return t?(n=new Date(t[1],0,1),e||!t[13]?(e=new Date(t[1],0,1,9,0),t[3]&&(n.setMonth(t[3]-1),e.setMonth(t[3]-1)),t[5]&&(n.setDate(t[5]),e.setDate(t[5])),a(n,e),t[7]&&n.setHours(t[7]),t[8]&&n.setMinutes(t[8]),t[10]&&n.setSeconds(t[10]),t[12]&&n.setMilliseconds(1e3*Number("0."+t[12])),a(n,e)):(n.setUTCFullYear(t[1],t[3]?t[3]-1:0,t[5]||1),n.setUTCHours(t[7]||0,t[8]||0,t[10]||0,t[12]?1e3*Number("0."+t[12]):0),t[14]&&(e=60*Number(t[16])+(t[18]?Number(t[18]):0),e*="-"==t[15]?1:-1,n=new Date(+n+60*e*1e3))),n):null}function Tt(t){var e;return"number"==typeof t?60*t:"object"==typeof t?60*t.getHours()+t.getMinutes():(t=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/))?(e=parseInt(t[1],10),t[3]&&(e%=12,"p"==t[3].toLowerCase().charAt(0))&&(e+=12),60*e+(t[2]?parseInt(t[2],10):0)):void 0}function j(t,e,n){return I(t,null,e,n)}function I(t,e,n,r){r=r||h;for(var a,o,i,s=t,l=e,c=n.length,u="",d=0;d<c;d++)if("'"==(a=n.charAt(d))){for(o=d+1;o<c;o++)if("'"==n.charAt(o)){s&&(u+=o==d+1?"'":n.substring(d+1,o),d=o);break}}else if("("==a){for(o=d+1;o<c;o++)if(")"==n.charAt(o)){var f=j(s,n.substring(d+1,o),r);parseInt(f.replace(/\D/,""),10)&&(u+=f),d=o;break}}else if("["==a){for(o=d+1;o<c;o++)if("]"==n.charAt(o)){var v=n.substring(d+1,o);(f=j(s,v,r))!=j(l,v,r)&&(u+=f),d=o;break}}else if("{"==a)s=e,l=t;else if("}"==a)s=t,l=e;else{for(o=c;d<o;o--)if(i=g[n.substring(d,o)]){s&&(u+=i(s,r)),d=o-1;break}o==d&&s&&(u+=a)}return u}var g={s:function(t){return t.getSeconds()},ss:function(t){return e(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return e(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return e(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return e(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return e(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return e(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return t.getHours()<12?"a":"p"},tt:function(t){return t.getHours()<12?"am":"pm"},T:function(t){return t.getHours()<12?"A":"P"},TT:function(t){return t.getHours()<12?"AM":"PM"},u:function(t){return j(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){t=t.getDate();return!(10<t&&t<20)&&["st","nd","rd"][t%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return t=t,(t=new Date(t.getTime())).setDate(t.getDate()+4-(t.getDay()||7)),e=t.getTime(),t.setMonth(0),t.setDate(1),Math.floor(Math.round((e-t)/864e5)/7)+1;var e}};function xt(t){return t.end?(e=t.end,n=t.allDay,e=Mt(e),n||e.getHours()||e.getMinutes()?wt(e,1):Ct(e)):wt(Mt(t.start),1);var e,n}function Ot(t,a,o){t.unbind("mouseover").mouseover(function(t){for(var e,n,r=t.target;r!=this;)r=(e=r).parentNode;(n=e._fci)!==yt&&(e._fci=yt,n=a[n],o(n.event,n.element,n),mt(t.target).trigger(t)),t.stopPropagation()})}function kt(t,e,n){for(var r,a=0;a<t.length;a++)(r=mt(t[a])).width(Math.max(0,e-Ht(r,n)))}function Lt(t,e,n){for(var r,a=0;a<t.length;a++)(r=mt(t[a])).height(Math.max(0,e-Ft(r,n)))}function Ht(t,e){return n=t,(parseFloat(mt.css(n[0],"paddingLeft",!0))||0)+(parseFloat(mt.css(n[0],"paddingRight",!0))||0)+(n=t,(parseFloat(mt.css(n[0],"borderLeftWidth",!0))||0)+(parseFloat(mt.css(n[0],"borderRightWidth",!0))||0))+(e?(n=t,(parseFloat(mt.css(n[0],"marginLeft",!0))||0)+(parseFloat(mt.css(n[0],"marginRight",!0))||0)):0);var n}function Ft(t,e){return n=t,(parseFloat(mt.css(n[0],"paddingTop",!0))||0)+(parseFloat(mt.css(n[0],"paddingBottom",!0))||0)+(n=t,(parseFloat(mt.css(n[0],"borderTopWidth",!0))||0)+(parseFloat(mt.css(n[0],"borderBottomWidth",!0))||0))+(e?(n=t,(parseFloat(mt.css(n[0],"marginTop",!0))||0)+(parseFloat(mt.css(n[0],"marginBottom",!0))||0)):0);var n}function _t(t,e){return t-e}function $(t){return Math.max.apply(Math,t)}function e(t){return(t<10?"0":"")+t}function R(t,e){if(t[e]!==yt)return t[e];for(var n,r=e.split(/(?=[A-Z])/),a=r.length-1;0<=a;a--)if((n=t[r[a].toLowerCase()])!==yt)return n;return t[""]}function Rt(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Nt(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function zt(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function Pt(t,e){var n=t.source||{},r=t.color,a=n.color,o=e("eventColor"),i=t.backgroundColor||r||n.backgroundColor||a||e("eventBackgroundColor")||o,r=t.borderColor||r||n.borderColor||a||e("eventBorderColor")||o,a=t.textColor||n.textColor||e("eventTextColor"),o=[];return i&&o.push("background-color:"+i),r&&o.push("border-color:"+r),a&&o.push("color:"+a),o.join(";")}function X(t,e,n){if(t=mt.isFunction(t)?[t]:t){for(var r,a=0;a<t.length;a++)r=t[a].apply(e,n)||r;return r}}function J(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==yt)return arguments[t]}function n(a,t,O){var r,o,s,i,l,c,u,d,f,v,e,n,h,g,p,m,y,b,w,D,C,M,E,S,T,x=this,k=(x.renderBasic=function(t,e,n){g=t,p=e,m=n,C=k("theme")?"ui":"fc",M=k("columnFormat"),E=k("weekNumbers"),S=k("weekNumberTitle"),T="iso"!=k("weekNumberCalculation")?"w":"W",i||(v=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));!function(){var t="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+function(){var t,e,n=C+"-widget-header",r="";r+="<thead><tr>",E&&(r+="<th class='fc-week-number "+n+"'>"+Rt(S)+"</th>");for(t=0;t<p;t++)e=R(0,t),r+="<th class='fc-day-header fc-"+bt[e.getDay()]+" "+n+"'>"+Rt(N(e,M))+"</th>";return r+="</tr></thead>"}()+function(){var t,e,n,r=C+"-widget-content",a="";for(a+="<tbody>",t=0;t<g;t++){for(a+="<tr class='fc-week'>",E&&(n=R(t,0),a+="<td class='fc-week-number "+r+"'><div>"+Rt(N(n,T))+"</div></td>"),e=0;e<p;e++)n=R(t,e),a+=function(t){var e=C+"-widget-content",n=x.start.getMonth(),r=Ct(new Date),a="",e=["fc-day","fc-"+bt[t.getDay()],e];t.getMonth()!=n&&e.push("fc-other-month");+t==+r?e.push("fc-today",C+"-state-highlight"):e.push(t<r?"fc-past":"fc-future");a+="<td class='"+e.join(" ")+"' data-date='"+N(t,"yyyy-MM-dd")+"'><div>",m&&(a+="<div class='fc-day-number'>"+t.getDate()+"</div>");return a+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>"}(n);a+="</tr>"}return a+="</tbody>"}()+"</table>";r&&r.remove();r=mt(t).appendTo(a),o=r.find("thead"),s=o.find(".fc-day-header"),i=r.find("tbody"),l=i.find("tr"),c=i.find(".fc-day"),u=l.find("td:first-child"),d=l.eq(0).find(".fc-day > div"),f=l.eq(0).find(".fc-day-content > div"),zt(o.add(o.find("tr"))),zt(l),l.eq(0).addClass("fc-first"),l.filter(":last").addClass("fc-last"),c.each(function(t,e){t=R(Math.floor(t/p),t%p);H("dayRender",x,t,mt(e))}),z(c)}()},x.setHeight=function(t){var n,r,a,t=t-o.height();"variable"==k("weekMode")?n=r=Math.floor(t/(1==g?2:6)):(n=Math.floor(t/g),r=t-n*(g-1));u.each(function(t,e){t<g&&(a=mt(e)).find("> div").css("min-height",(t==g-1?r:n)-Ft(a))})},x.setWidth=function(t){e=t,w.clear(),D.clear(),h=0,E&&(h=o.find("th.fc-week-number").outerWidth());n=Math.floor((e-h)/p),kt(s.slice(0,-1),n)},x.renderDayOverlay=W,x.defaultSelectionEnd=function(t,e){return Mt(t)},x.renderSelection=function(t,e,n){W(t,wt(Mt(e),1),!0)},x.clearSelection=function(){F()},x.reportDayClick=function(t,e,n){var r=P(t),r=c[r.row*p+r.col];H("dayClick",r,t,e,n)},x.dragStart=function(t,e,n){b.start(function(t){F(),t&&A(t.row,t.col,t.row,t.col)},e)},x.dragStop=function(t,e,n){var r=b.stop();F(),r&&(r=R(r),H("drop",t,r,!0,e,n))},x.defaultEventEnd=function(t){return Mt(t.start)},x.getHoverListener=function(){return b},x.colLeft=function(t){return w.left(t)},x.colRight=function(t){return w.right(t)},x.colContentLeft=function(t){return D.left(t)},x.colContentRight=function(t){return D.right(t)},x.getIsCellAllDay=function(){return!0},x.allDayRow=function(t){return l.eq(t)},x.getRowCnt=function(){return g},x.getColCnt=function(){return p},x.getColWidth=function(){return n},x.getDaySegmentContainer=function(){return v},jt.call(x,a,t,O),Jt.call(x),Xt.call(x),!function(){var n=this;n.renderEvents=function(t,e){n.renderDayEvents(t,e)},n.clearEvents=function(){n.getDaySegmentContainer().empty()},It.call(n)}.call(x),x.opt),H=x.trigger,L=x.renderOverlay,F=x.clearOverlays,_=x.daySelectionMousedown,R=x.cellToDate,P=x.dateToCell,q=x.rangeToSegments,N=t.formatDate;function z(t){t.click(Y).mousedown(_)}function Y(t){var e;k("selectable")||(e=B(mt(this).data("date")),H("dayClick",this,e,!0,t))}function W(t,e,n){n&&y.build();for(var r=q(t,e),a=0;a<r.length;a++){var o=r[a];z(A(o.row,o.leftCol,o.row,o.rightCol))}}function A(t,e,n,r){t=y.rect(t,e,n,r,a);return L(t,a)}Nt(a.addClass("fc-grid")),y=new Vt(function(n,r){var a,o,i;s.each(function(t,e){a=mt(e),o=a.offset().left,t&&(i[1]=o),i=[o],r[t]=i}),i[1]=o+a.outerWidth(),l.each(function(t,e){t<g&&(a=mt(e),o=a.offset().top,t&&(i[1]=o),i=[o],n[t]=i)}),i[1]=o+a.outerHeight()}),b=new Ut(y),w=new Wt(function(t){return d.eq(t)}),D=new Wt(function(t){return f.eq(t)})}function d(l,O,L){var o,n,u,r,i,e,_,P,q,c,d,f,v,h,g,Y,p,s,B,m,y,j,a,b,w,D,C,I,M,E,S,T,x,X,k,H,J,V,U,Z,t=this,F=(t.renderAgenda=function(t){C=t,function(){x=F("theme")?"ui":"fc",X=F("isRTL"),k=Tt(F("minTime")),H=Tt(F("maxTime")),J=F("columnFormat"),V=F("weekNumbers"),U=F("weekNumberTitle"),Z="iso"!=F("weekNumberCalculation")?"w":"W";b=F("snapMinutes")||F("slotMinutes")}(),(o?it:function(){var t,e,n,r,a,o=x+"-widget-header",i=x+"-widget-content",s=F("slotMinutes")%15==0;it(),c=mt("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(l),F("allDaySlot")?(d=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(c),t="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+o+" fc-agenda-axis'>"+F("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+o+" fc-agenda-gutter'>&nbsp;</th></tr></table>",f=mt(t).appendTo(c),st((v=f.find("tr")).find("td")),c.append("<div class='fc-agenda-divider "+o+"'><div class='fc-agenda-divider-inner'/></div>")):d=mt([]);for(h=mt("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(c),g=mt("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(h),Y=mt("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(g),t="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",e=Et(),r=Dt(Mt(e),H),Dt(e,k),n=I=0;e<r;n++)a=e.getMinutes(),t+="<tr class='fc-slot"+n+" "+(a?"fc-minor":"")+"'><th class='fc-agenda-axis "+o+"'>"+(s&&a?"&nbsp;":at(e,F("axisFormat")))+"</th><td class='"+i+"'><div style='position:relative'>&nbsp;</div></td></tr>",Dt(e,F("slotMinutes")),I++;lt((p=mt(t+="</tbody></table>").appendTo(g)).find("td"))})()},t.setWidth=function(t){S.clear(),T.clear();t=n.find("th:first");f&&(t=t.add(f.find("th:first")));t=t.add(p.find("th:first")),m=0,kt(t.width("").each(function(t,e){m=Math.max(m,mt(e).outerWidth())}),m);t=o.find(".fc-agenda-gutter");f&&(t=t.add(f.find("th.fc-agenda-gutter")));var e=h[0].clientWidth;(j=h.width()-e)?(kt(t,j),t.show().prev().removeClass("fc-last")):t.hide().prev().addClass("fc-last");y=Math.floor((e-m)/C),kt(u.slice(0,-1),y)},t.setHeight=function(t){t===yt&&(t=B);B=t,ot={};var e=r.position().top,n=h.position().top,t=Math.min(t-e,p.height()+n+1);q.height(t-Ft(P)),c.css("top",e),h.height(t-n-1),a=p.find("tr:first").height()+1,w=F("slotMinutes")/b,D=a/w},t.afterRender=function(){!function(){var t=Et(),e=Mt(t),n=(e.setHours(F("firstHour")),A(t,e)+1);function r(){h.scrollTop(n)}r(),setTimeout(r,0)}()},t.defaultEventEnd=function(t){var e=Mt(t.start);if(t.allDay)return e;return Dt(e,F("defaultEventMinutes"))},t.timePosition=A,t.getIsCellAllDay=z,t.allDayRow=function(t){return v},t.getCoordinateGrid=function(){return M},t.getHoverListener=function(){return E},t.colLeft=function(t){return S.left(t)},t.colRight=function(t){return S.right(t)},t.colContentLeft=function(t){return T.left(t)},t.colContentRight=function(t){return T.right(t)},t.getDaySegmentContainer=function(){return d},t.getSlotSegmentContainer=function(){return Y},t.getMinMinute=function(){return k},t.getMaxMinute=function(){return H},t.getSlotContainer=function(){return g},t.getRowCnt=function(){return 1},t.getColCnt=function(){return C},t.getColWidth=function(){return y},t.getSnapHeight=function(){return D},t.getSnapMinutes=function(){return b},t.defaultSelectionEnd=function(t,e){if(e)return Mt(t);return Dt(Mt(t),F("slotMinutes"))},t.renderDayOverlay=ut,t.renderSelection=function(t,e,n){n?F("allDaySlot")&&ut(t,wt(Mt(e),1),!0):vt(t,e)},t.clearSelection=ht,t.reportDayClick=pt,t.dragStart=function(t,e,n){E.start(function(t){$(),t&&(z(t)?dt(t.row,t.col,t.row,t.col):ft(t=W(t),Dt(Mt(t),F("defaultEventMinutes"))))},e)},t.dragStop=function(t,e,n){var r=E.stop();$(),r&&R("drop",t,W(r),z(r),e,n)},jt.call(t,l,O,L),Jt.call(t),Xt.call(t),!function(){var R=this,N=(R.renderEvents=function(t,e){var n,r=t.length,a=[],o=[];for(n=0;n<r;n++)(t[n].allDay?a:o).push(t[n]);N("allDaySlot")&&(s(a,e),i());!function(t,e){var n,r,a,o,i,s,l,c,u,d,f,v,h,g,p,m,y=t.length,b="",w=C(),D=N("isRTL");for(n=0;n<y;n++)r=t[n],a=r.event,o=M(r.start,r.start),i=M(r.start,r.end),s=E(r.col),l=S(r.col),u=(c=(l-=.025*(c=l-s))-s)*(r.forwardCoord-r.backwardCoord),N("slotEventOverlap")&&(u=Math.max(2*(u-10),u)),D?(f=l-r.backwardCoord*c,d=f-u):(d=s+r.backwardCoord*c,f=d+u),d=Math.max(d,s),f=Math.min(f,l),u=f-d,r.top=o,r.left=d,r.outerWidth=u,r.outerHeight=i-o,b+=k(a,r);for(w[0].innerHTML=b,v=w.children(),n=0;n<y;n++)r=t[n],a=r.event,h=mt(v[n]),!1===(g=z("eventRender",a,a,h))?h.remove():(g&&!0!==g&&(h.remove(),h=mt(g).css({position:"absolute",top:r.top,left:r.left}).appendTo(w)),r.element=h,a._id===e?H(a,h,r):h[0]._fci=n,T(a,h));for(Ot(w,t,H),n=0;n<y;n++)r=t[n],(h=r.element)&&(r.vsides=Ft(h,!0),r.hsides=Ht(h,!0),(p=h.find(".fc-event-title")).length)&&(r.contentTop=p[0].offsetTop);for(n=0;n<y;n++)r=t[n],(h=r.element)&&(h[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",m=Math.max(0,r.outerHeight-r.vsides),h[0].style.height=m+"px",a=r.event,r.contentTop!==yt&&m-r.contentTop<10&&(h.find("div.fc-event-time").text(x(a.start,N("timeFormat"))+" - "+a.title),h.find("div.fc-event-title").remove()),z("eventAfterRender",a,a,h))}(function(t){var e,n,r,a,o,i=q(),s=g(),l=d(),c=mt.map(t,f),u=[];for(n=0;n<i;n++)for(Dt(e=P(0,n),s),o=function(t){var e,t=function(t){var e,n,r,a=[];for(e=0;e<t.length;e++){for(n=t[e],r=0;r<a.length&&qt(n,a[r]).length;r++);(a[r]||(a[r]=[])).push(n)}return a}(t),n=t[0];if(function(t){var e,n,r,a,o;for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)for((a=n[r]).forwardSegs=[],o=e+1;o<t.length;o++)qt(a,t[o],a.forwardSegs)}(t),n){for(e=0;e<n.length;e++)!function t(e){var n=e.forwardSegs;var r=0;var a,o;if(e.forwardPressure===yt){for(a=0;a<n.length;a++)o=n[a],t(o),r=Math.max(r,1+o.forwardPressure);e.forwardPressure=r}}(n[e]);for(e=0;e<n.length;e++)!function t(e,n,r){var a=e.forwardSegs;var o;if(e.forwardCoord===yt)for(a.length?(a.sort(Yt),t(a[0],n+1,r),e.forwardCoord=a[0].backwardCoord):e.forwardCoord=1,e.backwardCoord=e.forwardCoord-(e.forwardCoord-r)/(n+1),o=0;o<a.length;o++)t(a[o],0,e.forwardCoord)}(n[e],0,0)}return function(t){var e,n,r,a=[];for(e=0;e<t.length;e++)for(n=t[e],r=0;r<n.length;r++)a.push(n[r]);return a}(t)}(o=function(t,e,n,r){var a,o,i,s,l,c,u=[],d=t.length;for(a=0;a<d;a++)o=t[a],l=o.start,c=e[a],n<c&&l<r&&(l=l<n?(i=Mt(n),!1):(i=l,!0),c=r<c?(s=Mt(r),!1):(s=c,!0),u.push({event:o,start:i,end:s,isStart:l,isEnd:c}));return u.sort(Bt)}(t,c,e,Dt(Mt(e),l-s))),r=0;r<o.length;r++)(a=o[r]).col=n,u.push(a);return u}(o),e)},R.clearEvents=function(){t().empty(),C().empty()},R.slotSegHtml=k,It.call(R),R.opt),z=R.trigger,W=R.isEventDraggable,A=R.isEventResizable,O=R.eventEnd,L=R.eventElementHandlers,i=R.setHeight,t=R.getDaySegmentContainer,C=R.getSlotSegmentContainer,e=R.getHoverListener,d=R.getMaxMinute,g=R.getMinMinute,M=R.timePosition,_=R.getIsCellAllDay,E=R.colContentLeft,S=R.colContentRight,P=R.cellToDate,q=R.getColCnt,Y=R.getColWidth,B=R.getSnapHeight,j=R.getSnapMinutes,p=R.getSlotContainer,T=R.reportEventElement,I=R.showEvents,X=R.hideEvents,J=R.eventDrop,V=R.eventResize,U=R.renderDayOverlay,Z=R.clearOverlays,s=R.renderDayEvents,n=R.calendar,x=n.formatDate,G=n.formatDates;function f(t){return t.end?Mt(t.end):Dt(Mt(t.start),N("defaultEventMinutes"))}function k(t,e){var n="<",r=t.url,a=Pt(t,N),o=["fc-event","fc-event-vert"];return W(t)&&o.push("fc-event-draggable"),e.isStart&&o.push("fc-event-start"),e.isEnd&&o.push("fc-event-end"),o=o.concat(t.className),t.source&&(o=o.concat(t.source.className||[])),n=(n+=r?"a href='"+Rt(t.url)+"'":"div")+(" class='"+o.join(" ")+"' style='position:absolute;top:"+e.top+"px;left:"+e.left+"px;"+a+"'><div class='fc-event-inner'><div class='fc-event-time'>"+Rt(G(t.start,t.end,N("timeFormat")))+"</div><div class='fc-event-title'>"+Rt(t.title||"")+"</div></div><div class='fc-event-bg'></div>"),e.isEnd&&A(t)&&(n+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),n+="</"+(r?"a":"div")+">"}function H(t,e,n){var r,a,o,i,s,l,c,u,d,f,v,h,g,p,m,y,b,w,D,C,M,E,S,T,x,k,H=e.find("div.fc-event-time");function F(){var t,e,n;Z(),l&&(u?(o.hide(),a.draggable("option","grid",null),U(wt(Mt(r.start),h),wt(xt(r),h))):(t=g,n=Dt(Mt(r.start),t),r.end&&(e=Dt(Mt(r.end),t)),o.text(G(n,e,N("timeFormat"))),o.css("display",""),a.draggable("option","grid",[b,w])))}W(t)&&(r=t,a=e,o=H,m=R.getCoordinateGrid(),y=q(),b=Y(),w=B(),D=j(),a.draggable({scroll:!1,grid:[b,w],axis:1==y&&"y",opacity:N("dragOpacity"),revertDuration:N("dragRevertDuration"),start:function(t,e){z("eventDragStart",a,r,t,e),X(r,a),m.build(),i=a.position(),s=m.cell(t.pageX,t.pageY),l=c=!0,u=d=_(s),f=v=0,g=p=h=0},drag:function(t,e){var n,t=m.cell(t.pageX,t.pageY);(l=!!t)&&(u=_(t),(f=Math.round((e.position.left-i.left)/b))!=v&&(t=P(0,s.col),n=s.col+f,n=Math.max(0,n),n=Math.min(y-1,n),n=P(0,n),h=St(n,t)),u||(g=Math.round((e.position.top-i.top)/w)*D)),l==c&&u==d&&f==v&&g==p||(F(),c=l,d=u,v=f,p=g),a.draggable("option","revert",!l)},stop:function(t,e){Z(),z("eventDragStop",a,r,t,e),l&&(u||h||g)?J(this,r,h,u?0:g,u,t,e):(u=!(l=!0),g=h=f=0,F(),a.css("filter",""),a.css(i),I(r,a))}})),n.isEnd&&A(t)&&(C=t,M=e,E=H,x=B(),k=j(),M.resizable({handles:{s:".ui-resizable-handle"},grid:x,start:function(t,e){S=T=0,X(C,M),z("eventResizeStart",this,C,t,e)},resize:function(t,e){(S=Math.round((Math.max(x,M.height())-e.originalSize.height)/x))!=T&&(E.text(G(C.start,S||C.end?Dt(O(C),k*S):null,N("timeFormat"))),T=S)},stop:function(t,e){z("eventResizeStop",this,C,t,e),S?V(this,C,0,k*S,t,e):I(C,M)}})),L(t,e)}R.draggableDayEvent=function(r,a,t){var n,o,i,s=t.isStart,l=!0,c=e(),u=Y(),d=B(),f=j(),v=g();function h(){l||(a.width(n).height("").draggable("option","grid",null),l=!0)}a.draggable({opacity:N("dragOpacity","month"),revertDuration:N("dragRevertDuration"),start:function(t,e){z("eventDragStart",a,r,t,e),X(r,a),n=a.width(),c.start(function(t,e){var n;Z(),o=t?(o=!1,e=P(0,e.col),n=P(0,t.col),i=St(n,e),t.row?s?l&&(a.width(u-10),Lt(a,d*Math.round((r.end?(r.end-r.start)/At:N("defaultEventMinutes"))/f)),a.draggable("option","grid",[u,1]),l=!1):o=!0:(U(wt(Mt(r.start),i),wt(xt(r),i)),h()),o||l&&!i):(h(),!0),a.draggable("option","revert",o)},t,"drag")},stop:function(t,e){var n;c.stop(),Z(),z("eventDragStop",a,r,t,e),o?(h(),a.css("filter",""),I(r,a)):(n=0,l||(n=Math.round((a.offset().top-p().offset().top)/d)*f+v-(60*r.start.getHours()+r.start.getMinutes())),J(this,r,i,n,l,t,e))}})}}.call(t),t.opt),R=t.trigger,G=t.renderOverlay,$=t.clearOverlays,Q=t.reportSelection,K=t.unselect,tt=t.daySelectionMousedown,et=t.slotSegHtml,N=t.cellToDate,nt=t.dateToCell,rt=t.rangeToSegments,at=O.formatDate,ot={};function it(){var t="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+function(){var t,e,n,r=x+"-widget-header",a="";a+="<thead><tr>",V?(t=N(0,0),e=at(t,Z),X?e+=U:e=U+e,a+="<th class='fc-agenda-axis fc-week-number "+r+"'>"+Rt(e)+"</th>"):a+="<th class='fc-agenda-axis "+r+"'>&nbsp;</th>";for(n=0;n<C;n++)t=N(0,n),a+="<th class='fc-"+bt[t.getDay()]+" fc-col"+n+" "+r+"'>"+Rt(at(t,J))+"</th>";return a+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th></tr></thead>"}()+function(){var t,e,n,r,a=x+"-widget-header",o=x+"-widget-content",i=Ct(new Date),s="";for(s+="<tbody><tr><th class='fc-agenda-axis "+a+"'>&nbsp;</th>",e="",t=0;t<C;t++)n=N(0,t),r=["fc-col"+t,"fc-"+bt[n.getDay()],o],+n==+i?r.push(x+"-state-highlight","fc-today"):r.push(n<i?"fc-past":"fc-future"),n="<td class='"+r.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",e+=n;return s=s+e+"<td class='fc-agenda-gutter "+o+"'>&nbsp;</td></tr></tbody>"}()+"</table>";o&&o.remove(),o=mt(t).appendTo(l),n=o.find("thead"),u=n.find("th").slice(1,-1),r=o.find("tbody"),i=r.find("td").slice(0,-1),e=i.find("> div"),_=i.find(".fc-day-content > div"),P=i.eq(0),q=e.eq(0),zt(n.add(n.find("tr"))),zt(r.add(r.find("tr")))}function st(t){t.click(ct).mousedown(tt)}function lt(t){t.click(ct).mousedown(gt)}function ct(t){var e,n,r,a;F("selectable")||(e=Math.min(C-1,Math.floor((t.pageX-o.offset().left-m)/y)),n=N(0,e),(r=this.parentNode.className.match(/fc-slot(\d+)/))?(r=parseInt(r[1])*F("slotMinutes"),a=Math.floor(r/60),n.setHours(a),n.setMinutes(r%60+k),R("dayClick",i[e],n,!1,t)):R("dayClick",i[e],n,!0,t))}function ut(t,e,n){n&&M.build();for(var r=rt(t,e),a=0;a<r.length;a++){var o=r[a];st(dt(o.row,o.leftCol,o.row,o.rightCol))}}function dt(t,e,n,r){t=M.rect(t,e,n,r,c);return G(t,c)}function ft(t,e){for(var n=0;n<C;n++){var r,a=N(0,n),o=wt(Mt(a),1),i=new Date(Math.max(a,t)),o=new Date(Math.min(o,e));i<o&&(r=M.rect(0,n,0,n,g),i=A(a,i),a=A(a,o),r.top=i,r.height=a-i,lt(G(r,g)))}}function z(t){return F("allDaySlot")&&!t.row}function W(t){var e=N(0,t.col),t=t.row;return F("allDaySlot")&&t--,0<=t&&Dt(e,k+t*b),e}function A(t,e){var n,r;return t=Mt(t,!0),e<Dt(Mt(t),k)?0:e>=Dt(Mt(t),H)?p.height():(t=F("slotMinutes"),e=60*e.getHours()+e.getMinutes()-k,n=Math.floor(e/t),(r=ot[n])===yt&&(r=ot[n]=p.find("tr").eq(n).find("td div")[0].offsetTop),Math.max(0,Math.round(r-1+a*(e%t/t))))}function vt(t,e){var n,r,a,o=F("selectHelper");M.build(),o?0<=(n=nt(t).col)&&n<C&&(n=M.rect(0,n,0,n,g),(r=A(t,t))<(a=A(t,e)))&&(n.top=r,n.height=a-r,n.left+=2,n.width-=5,mt.isFunction(o)?(a=o(t,e))&&(n.position="absolute",s=mt(a).css(n).appendTo(g)):(n.isStart=!0,n.isEnd=!0,(s=mt(et({title:"",start:t,end:e,className:["fc-select-helper"],editable:!1},n))).css("opacity",F("dragOpacity"))),s)&&(lt(s),g.append(s),kt(s,n.width,!0),Lt(s,n.height,!0)):ft(t,e)}function ht(){$(),s&&(s.remove(),s=null)}function gt(t){var n;1==t.which&&F("selectable")&&(K(t),E.start(function(t,e){ht(),t&&t.col==e.col&&!z(t)?(e=W(e),t=W(t),vt((n=[e,Dt(Mt(e),b),t,Dt(Mt(t),b)].sort(_t))[0],n[3])):n=null},t),mt(document).one("mouseup",function(t){E.stop(),n&&(+n[0]==+n[1]&&pt(n[0],!1,t),Q(n[0],n[3],!1,t))}))}function pt(t,e,n){R("dayClick",i[nt(t).col],t,e,n)}Nt(l.addClass("fc-agenda")),M=new Vt(function(t,n){u.each(function(t,e){r=mt(e),a=r.offset().left,t&&(o[1]=a),o=[a],n[t]=o}),o[1]=a+r.outerWidth(),F("allDaySlot")&&(a=(r=v).offset().top,t[0]=[a,a+r.outerHeight()]);var r,a,o,e=g.offset().top,i=h.offset().top,s=i+h.outerHeight();function l(t){return Math.max(i,Math.min(s,t))}for(var c=0;c<I*w;c++)t.push([l(e+D*c),l(e+D*(c+1))])}),E=new Ut(M),S=new Wt(function(t){return e.eq(t)}),T=new Wt(function(t){return _.eq(t)})}function qt(t,e,n){n=n||[];for(var r,a,o=0;o<e.length;o++)r=t,a=e[o],r.end>a.start&&r.start<a.end&&n.push(e[o]);return n}function Yt(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||Bt(t,e)}function Bt(t,e){return t.start-e.start||e.end-e.start-(t.end-t.start)||(t.event.title||"").localeCompare(e.event.title)}function jt(t,n,r){var h=this,e=(h.element=t,h.calendar=n,h.name=r,h.opt=o,h.trigger=d,h.isEventDraggable=function(t){var e=t.source||{};return J(t.startEditable,e.startEditable,o("eventStartEditable"),t.editable,e.editable,o("editable"))&&!o("disableDragging")},h.isEventResizable=function(t){var e=t.source||{};return J(t.durationEditable,e.durationEditable,o("eventDurationEditable"),t.editable,e.editable,o("editable"))&&!o("disableResizing")},h.setEventData=function(t){u={};var e,n,r=t.length;for(e=0;e<r;e++)n=t[e],u[n._id]?u[n._id].push(n):u[n._id]=[n]},h.clearEventData=function(){u={},i={},a=[]},h.eventEnd=f,h.reportEventElement=function(t,e){a.push({event:t,element:e}),i[t._id]?i[t._id].push(e):i[t._id]=[e]},h.triggerEventDestroy=function(){mt.each(a,function(t,e){h.trigger("eventDestroy",e.event,e.event,e.element)})},h.eventElementHandlers=function(e,n){n.click(function(t){if(!n.hasClass("ui-draggable-dragging")&&!n.hasClass("ui-resizable-resizing"))return d("eventClick",this,e,t)}).hover(function(t){d("eventMouseover",this,e,t)},function(t){d("eventMouseout",this,e,t)})},h.showEvents=function(t,e){v(t,e,"show")},h.hideEvents=function(t,e){v(t,e,"hide")},h.eventDrop=function(t,e,n,r,a,o,i){var s=e.allDay,l=e._id;g(u[l],n,r,a),d("eventDrop",t,e,n,r,a,function(){g(u[l],-n,-r,s),c(l)},o,i),c(l)},h.eventResize=function(t,e,n,r,a,o){var i=e._id;p(u[i],n,r),d("eventResize",t,e,n,r,function(){p(u[i],-n,-r),c(i)},a,o),c(i)},h.defaultEventEnd),s=n.normalizeEvent,c=n.reportEventChange,u={},i={},a=[],l=n.options;function o(t,e){t=l[t];return mt.isPlainObject(t)?R(t,e||r):t}function d(t,e){return n.trigger.apply(n,[t,e||h].concat(Array.prototype.slice.call(arguments,2),[h]))}function f(t){return t.end?Mt(t.end):e(t)}function v(t,e,n){for(var r=i[t._id],a=r.length,o=0;o<a;o++)e&&r[o][0]==e[0]||r[o][n]()}function g(t,e,n,r){n=n||0;for(var a,o=t.length,i=0;i<o;i++)a=t[i],r!==yt&&(a.allDay=r),Dt(wt(a.start,e,!0),n),a.end&&(a.end=Dt(wt(a.end,e,!0),n)),s(a,l)}function p(t,e,n){n=n||0;for(var r,a=t.length,o=0;o<a;o++)(r=t[o]).end=Dt(wt(f(r),e,!0),n),s(r,l)}h.isHiddenDay=function(t){"object"==typeof t&&(t=t.getDay());return b[t]},h.skipHiddenDays=function(t,e,n){e=e||1;for(;b[(t.getDay()+(n?e:0)+7)%7];)wt(t,e)},h.getCellsPerWeek=function(){return m},h.dateToCell=function(t){return F(H(k(t)))},h.dateToDayOffset=k,h.dayOffsetToCellOffset=H,h.cellOffsetToCell=F,h.cellToDate=function(){return x(T(S.apply(null,arguments)))},h.cellToCellOffset=S,h.cellOffsetToDayOffset=T,h.dayOffsetToDate=x,h.rangeToSegments=function(t,e){for(var n=h.getRowCnt(),r=h.getColCnt(),a=[],o=k(t),i=k(e),s=H(o),l=H(i)-1,c=0;c<n;c++){var u,d,f=c*r,v=f+r-1,f=Math.max(s,f),v=Math.min(l,v);f<=v&&(u=F(f),d=F(v),u=[u.col,d.col].sort(),d=T(f)==o,f=T(v)+1==i,a.push({row:c,leftCol:u[0],rightCol:u[1],isStart:d,isEnd:f}))}return a};var m,y=o("hiddenDays")||[],b=[],w=[],D=[],C=o("isRTL");!1===o("weekends")&&y.push(0,6);for(var M=0,E=0;M<7;M++)w[M]=E,b[M]=-1!=mt.inArray(M,y),b[M]||(D[E]=M,E++);if(!(m=E))throw"invalid hiddenDays";function S(t,e){var n=h.getColCnt();return"object"==typeof t&&(e=t.col,t=t.row),t*n+(e*(C?-1:1)+(C?n-1:0))}function T(t){var e=h.visStart.getDay();return t+=w[e],7*Math.floor(t/m)+D[(t%m+m)%m]-e}function x(t){var e=Mt(h.visStart);return wt(e,t),e}function k(t){return St(t,h.visStart)}function H(t){var e=h.visStart.getDay();return t+=e,Math.floor(t/7)*m+w[(t%7+7)%7]-w[e]}function F(t){var e=h.getColCnt(),n=C?-1:1,r=C?e-1:0;return{row:Math.floor(t/e),col:(t%e+e)%e*n+r}}}function It(){var r=this,C=(r.renderDayEvents=function(t,e){t=P(t,!1,!0);V(t,function(t,e){n(t.event,e)}),function(t,a){var e=z();V(t,function(t,e,n){var r=t.event;r._id===a?o(r,e,t):e[0]._fci=n}),Ot(e,t,o)}(t,e),V(t,function(t,e){M("eventAfterRender",t.event,t.event,e)})},r.draggableDayEvent=function(a,o){var i,n=w();o.draggable({delay:50,opacity:C("dragOpacity"),revertDuration:C("dragRevertDuration"),start:function(t,e){M("eventDragStart",o,a,t,e),g(a,o),n.start(function(t,e,n,r){o.draggable("option","revert",!t||!n&&!r),y(),t?(n=l(e),r=l(t),i=St(r,n),m(wt(Mt(a.start),i),wt(xt(a),i))):i=0},t,"drag")},stop:function(t,e){n.stop(),y(),M("eventDragStop",o,a,t,e),i?s(this,a,i,0,a.allDay,t,e):(o.css("filter",""),h(a,o))}})},r.resizableDayEvent=function(u,n,d){var f=C("isRTL")?"w":"e",t=n.find(".ui-resizable-"+f),r=!1;Nt(n),n.mousedown(function(t){t.preventDefault()}).click(function(t){r&&(t.preventDefault(),t.stopImmediatePropagation())}),t.mousedown(function(t){var e,o,i,s,l,c;1==t.which&&(r=!0,e=w(),T(),x(),o=n.css("top"),l=mt.extend({},u),c=_(L(u.start)),b(),mt("body").css("cursor",f+"-resize").one("mouseup",function(t){M("eventResizeStop",this,u,t),mt("body").css("cursor",""),e.stop(),y(),i&&p(this,u,i,0,t);setTimeout(function(){r=!1},0)}),M("eventResizeStart",this,u,t),e.start(function(t,e){var n,r,a;t&&(e=D(e),t=D(t),t=Math.max(t,c),(i=O(t)-O(e))?(l.end=wt(v(u),i,!0),t=s,e=l,n=d.row,r=o,e=P([l],!0,!1),a=[],V(e,function(t,e){t.row===n&&e.css("top",r),a.push(e[0])}),(s=mt(s=a)).find("*").css("cursor",f+"-resize"),t&&t.remove(),g(u)):s&&(h(u),s.remove(),s=null),y(),m(u.start,wt(xt(u),i)))},t))})},r.opt),M=r.trigger,E=r.isEventDraggable,S=r.isEventResizable,v=r.eventEnd,n=r.reportEventElement,a=r.eventElementHandlers,h=r.showEvents,g=r.hideEvents,s=r.eventDrop,p=r.eventResize,T=r.getRowCnt,x=r.getColCnt,k=(r.getColWidth,r.allDayRow),H=r.colLeft,F=r.colRight,R=r.colContentLeft,N=r.colContentRight,z=(r.dateToCell,r.getDaySegmentContainer),W=r.calendar.formatDates,m=r.renderDayOverlay,y=r.clearOverlays,b=r.clearSelection,w=r.getHoverListener,A=r.rangeToSegments,l=r.cellToDate,D=r.cellToCellOffset,O=r.cellOffsetToDayOffset,L=r.dateToDayOffset,_=r.dayOffsetToCellOffset;function P(t,e,n){for(var r,a=z(),o=e?mt("<div/>"):a,t=function(t){for(var e=[],n=0;n<t.length;n++){var r=function(t){for(var e=t.start,n=xt(t),r=A(e,n),a=0;a<r.length;a++)r[a].event=t;return r}(t[n]);e.push.apply(e,r)}return e}(t),i=t,s=C("isRTL"),l=0;l<i.length;l++){var c=i[l],u=(s?c.isEnd:c.isStart)?R:H,d=(s?c.isStart:c.isEnd)?N:F,u=u(c.leftCol),d=d(c.rightCol);c.left=u,c.outerWidth=d-u}r=function(t){for(var e="",n=0;n<t.length;n++)e+=function(t){var e="",n=C("isRTL"),r=t.event,a=r.url,o=["fc-event","fc-event-hori"];E(r)&&o.push("fc-event-draggable");t.isStart&&o.push("fc-event-start");t.isEnd&&o.push("fc-event-end");o=o.concat(r.className),r.source&&(o=o.concat(r.source.className||[]));var i=Pt(r,C);e+=a?"<a href='"+Rt(a)+"'":"<div";e+=" class='"+o.join(" ")+"' style='position:absolute;left:"+t.left+"px;"+i+"'><div class='fc-event-inner'>",!r.allDay&&t.isStart&&(e+="<span class='fc-event-time'>"+Rt(W(r.start,r.end,C("timeFormat")))+"</span>");e+="<span class='fc-event-title'>"+Rt(r.title||"")+"</span></div>",t.isEnd&&S(r)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(n?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");return e+="</"+(a?"a":"div")+">"}(t[n]);return e}(t),o[0].innerHTML=r,r=o.children(),e&&a.append(r);for(var f=t,v=r,h=0;h<f.length;h++){var g=f[h],p=g.event,m=v.eq(h),p=M("eventRender",p,p,m);!1===p?m.remove():(p&&!0!==p&&(p=mt(p).css({position:"absolute",left:g.left}),m.replaceWith(p),m=p),g.element=m)}V(t,function(t,e){t.hsides=Ht(e,!0)}),V(t,function(t,e){e.width(Math.max(0,t.outerWidth-t.hsides))}),V(t,function(t,e){t.outerHeight=e.outerHeight(!0)});var o=t,e=n,y=function(t){for(var e=T(),n=x(),r=[],a=function(t){var e,n,r,a=T(),o=[];for(e=0;e<t.length;e++)n=t[e],r=n.row,n.element&&(o[r]?o[r].push(n):o[r]=[n]);for(r=0;r<a;r++)o[r]=function(t){for(var e=[],n=function(t){t.sort(Q);for(var e=[],n=0;n<t.length;n++){for(var r=t[n],a=0;a<e.length&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];if(r.leftCol<=t.rightCol&&r.rightCol>=t.leftCol)return 1}return}(r,e[a]);a++);e[a]?e[a].push(r):e[a]=[r]}return e}(t),r=0;r<n.length;r++)e.push.apply(e,n[r]);return e}(o[r]||[]);return o}(t),o=0;o<e;o++){for(var i=a[o],s=[],l=0;l<n;l++)s.push(0);for(var c=0;c<i.length;c++){var u=i[c];u.top=$(s.slice(u.leftCol,u.rightCol+1));for(l=u.leftCol;l<=u.rightCol;l++)s[l]=u.top+u.outerHeight}r.push($(s))}return r}(o),b=function(){var t,e=T(),n=[];for(t=0;t<e;t++)n[t]=k(t).find("div.fc-day-content > div");return n}(),w=[];if(e)for(var D=0;D<b.length;D++)b[D].height(y[D]);for(D=0;D<b.length;D++)w.push(b[D].position().top);return V(o,function(t,e){e.css("top",w[t.row]+t.top)}),t}function o(t,e,n){E(t)&&r.draggableDayEvent(t,e,n),n.isEnd&&S(t)&&r.resizableDayEvent(t,e,n),a(t,e)}}function V(t,e){for(var n=0;n<t.length;n++){var r=t[n],a=r.element;a&&e(r,a,n)}}function Q(t,e){return e.rightCol-e.leftCol-(t.rightCol-t.leftCol)||e.event.allDay-t.event.allDay||t.event.start-e.event.start||(t.event.title||"").localeCompare(e.event.title)}function Xt(){var i=this,s=(i.select=function(t,e,n){u(),e=e||r(t,n);l(t,e,n),d(t,e,n)},i.unselect=u,i.reportSelection=d,i.daySelectionMousedown=function(t){var n,r=i.cellToDate,a=i.getIsCellAllDay,e=i.getHoverListener(),o=i.reportDayClick;1==t.which&&s("selectable")&&(u(t),e.start(function(t,e){c(),t&&a(t)?(n=[r(e),r(t)].sort(_t),l(n[0],n[1],!0)):n=null},t),mt(document).one("mouseup",function(t){e.stop(),n&&(+n[0]==+n[1]&&o(n[0],!0,t),d(n[0],n[1],!0,t))}))},i.opt),a=i.trigger,r=i.defaultSelectionEnd,l=i.renderSelection,c=i.clearSelection,o=!1;function u(t){o&&(o=!1,c(),a("unselect",null,t))}function d(t,e,n,r){o=!0,a("select",null,t,e,n,r)}s("selectable")&&s("unselectAuto")&&mt(document).mousedown(function(t){var e=s("unselectCancel");e&&mt(t.target).parents(e).length||u(t)})}function Jt(){this.renderOverlay=function(t,e){var n=a.shift();n=n||mt("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>");n[0].parentNode!=e[0]&&n.appendTo(e);return r.push(n.css(t).show()),n},this.clearOverlays=function(){var t;for(;t=r.shift();)a.push(t.hide().unbind())};var r=[],a=[]}function Vt(t){var s,l;this.build=function(){t(s=[],l=[])},this.cell=function(t,e){for(var n=s.length,r=l.length,a=-1,o=-1,i=0;i<n;i++)if(e>=s[i][0]&&e<s[i][1]){a=i;break}for(i=0;i<r;i++)if(t>=l[i][0]&&t<l[i][1]){o=i;break}return 0<=a&&0<=o?{row:a,col:o}:null},this.rect=function(t,e,n,r,a){a=a.offset();return{top:s[t][0]-a.top,left:l[e][0]-a.left,width:l[r][1]-l[e][0],height:s[n][1]-s[t][0]}}}function Ut(r){var a,o,i,s;function l(t){(e=t).pageX===yt&&(e.pageX=e.originalEvent.pageX,e.pageY=e.originalEvent.pageY);var e=r.cell(t.pageX,t.pageY);!e==!s&&(!e||e.row==s.row&&e.col==s.col)||(e?o(e,i=i||e,e.row-i.row,e.col-i.col):o(e,i),s=e)}this.start=function(t,e,n){o=t,i=s=null,r.build(),l(e),a=n||"mousemove",mt(document).bind(a,l)},this.stop=function(){return mt(document).unbind(a,l),s}}function Wt(e){var n=this,r={},a={},o={};function i(t){return r[t]=r[t]||e(t)}n.left=function(t){return a[t]=a[t]===yt?i(t).position().left:a[t]},n.right=function(t){return o[t]=o[t]===yt?n.left(t)+i(t).width():o[t]},n.clear=function(){r={},a={},o={}}}O.dateFormatters=g,O.applyAll=X,L.month=function(t,e){var i=this,s=(i.render=function(t,e){e&&(P(t,e),t.setDate(1));var e=s("firstDay"),t=Mt(t,!0),n=(t.setDate(1),P(Mt(t),1)),r=Mt(t),a=(wt(r,-(r.getDay()-e+7)%7),c(r),Mt(n)),e=(wt(a,(7-a.getDay()+e)%7),c(a,-1,!0),u()),o=Math.round(St(a,r)/7);"fixed"==s("weekMode")&&(wt(a,7*(6-o)),o=6);i.title=d(t,s("titleFormat")),i.start=t,i.end=n,i.visStart=r,i.visEnd=a,l(o,e,!0)},n.call(i,t,e,"month"),i.opt),l=i.renderBasic,c=i.skipHiddenDays,u=i.getCellsPerWeek,d=e.formatDate},L.basicWeek=function(t,e){var o=this,i=(o.render=function(t,e){e&&wt(t,7*e);var e=wt(Mt(t),-(t.getDay()-i("firstDay")+7)%7),t=wt(Mt(e),7),n=Mt(e),r=(l(n),Mt(t)),a=(l(r,-1,!0),c());o.start=e,o.end=t,o.visStart=n,o.visEnd=r,o.title=u(n,wt(Mt(r),-1),i("titleFormat")),s(1,a,!1)},n.call(o,t,e,"basicWeek"),o.opt),s=o.renderBasic,l=o.skipHiddenDays,c=o.getCellsPerWeek,u=e.formatDates},L.basicDay=function(t,e){var r=this,a=(r.render=function(t,e){e&&wt(t,e);i(t,e<0?-1:1);var e=Mt(t,!0),n=wt(Mt(e),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=e,r.end=r.visEnd=n,o(1,1,!1)},n.call(r,t,e,"basicDay"),r.opt),o=r.renderBasic,i=r.skipHiddenDays,s=e.formatDate},t({weekMode:"fixed"}),L.agendaWeek=function(t,e){var o=this,i=(o.render=function(t,e){e&&wt(t,7*e);var e=wt(Mt(t),-(t.getDay()-i("firstDay")+7)%7),t=wt(Mt(e),7),n=Mt(e),r=(l(n),Mt(t)),a=(l(r,-1,!0),c());o.title=u(n,wt(Mt(r),-1),i("titleFormat")),o.start=e,o.end=t,o.visStart=n,o.visEnd=r,s(a)},d.call(o,t,e,"agendaWeek"),o.opt),s=o.renderAgenda,l=o.skipHiddenDays,c=o.getCellsPerWeek,u=e.formatDates},L.agendaDay=function(t,e){var r=this,a=(r.render=function(t,e){e&&wt(t,e);i(t,e<0?-1:1);var e=Mt(t,!0),n=wt(Mt(e),1);r.title=s(t,a("titleFormat")),r.start=r.visStart=e,r.end=r.visEnd=n,o(1)},d.call(r,t,e,"agendaDay"),r.opt),o=r.renderAgenda,i=r.skipHiddenDays,s=e.formatDate},t({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,slotEventOverlap:!0})}(jQuery);