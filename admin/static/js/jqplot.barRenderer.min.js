!function(w){function y(t,i,e,s,h){var r=t,t=t-1,a="x"===h?0:1,e=0<r?e*s.series[t]._plotData[i][a]<0?y(t,i,e,s,h):s.series[t].gridData[i][a]:(0==a?s.series[r]._xaxis:s.series[r]._yaxis).series_u2p(0);return e}function e(t,i,e){for(var s=0;s<this.series.length;s++)this.series[s].renderer.constructor==w.jqplot.BarRenderer&&this.series[s].highlightMouseOver&&(this.series[s].highlightMouseDown=!1)}function s(){this.plugins.barRenderer&&this.plugins.barRenderer.highlightCanvas&&(this.plugins.barRenderer.highlightCanvas.resetCanvas(),this.plugins.barRenderer.highlightCanvas=null),this.plugins.barRenderer={highlightedSeriesIndex:null},this.plugins.barRenderer.highlightCanvas=new w.jqplot.GenericCanvas,this.eventCanvas._elem.before(this.plugins.barRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-barRenderer-highlight-canvas",this._plotDimensions,this)),this.plugins.barRenderer.highlightCanvas.setContext(),this.eventCanvas._elem.bind("mouseleave",{plot:this},function(t){n(t.data.plot)})}function l(t,i,e,s){var h=t.series[i],r=t.plugins.barRenderer.highlightCanvas,t=(r._ctx.clearRect(0,0,r._ctx.canvas.width,r._ctx.canvas.height),h._highlightedPoint=e,t.plugins.barRenderer.highlightedSeriesIndex=i,{fillStyle:h.highlightColors[e]});h.renderer.shapeRenderer.draw(r._ctx,s,t)}function n(t){var i=t.plugins.barRenderer.highlightCanvas;i._ctx.clearRect(0,0,i._ctx.canvas.width,i._ctx.canvas.height);for(var e=0;e<t.series.length;e++)t.series[e]._highlightedPoint=null;t.plugins.barRenderer.highlightedSeriesIndex=null,t.target.trigger("jqplotDataUnhighlight")}function h(t,i,e,s,h){var r,a;s?(r=[s.seriesIndex,s.pointIndex,s.data],(a=jQuery.Event("jqplotDataMouseOver")).pageX=t.pageX,a.pageY=t.pageY,h.target.trigger(a,r),h.series[r[0]].show&&h.series[r[0]].highlightMouseOver&&(r[0]!=h.plugins.barRenderer.highlightedSeriesIndex||r[1]!=h.series[r[0]]._highlightedPoint)&&((a=jQuery.Event("jqplotDataHighlight")).which=t.which,a.pageX=t.pageX,a.pageY=t.pageY,h.target.trigger(a,r),l(h,s.seriesIndex,s.pointIndex,s.points))):null==s&&n(h)}function r(t,i,e,s,h){var r,a;s?(r=[s.seriesIndex,s.pointIndex,s.data],!h.series[r[0]].highlightMouseDown||r[0]==h.plugins.barRenderer.highlightedSeriesIndex&&r[1]==h.series[r[0]]._highlightedPoint||((a=jQuery.Event("jqplotDataHighlight")).which=t.which,a.pageX=t.pageX,a.pageY=t.pageY,h.target.trigger(a,r),l(h,s.seriesIndex,s.pointIndex,s.points))):null==s&&n(h)}function a(t,i,e,s,h){var r=h.plugins.barRenderer.highlightedSeriesIndex;null!=r&&h.series[r].highlightMouseDown&&n(h)}function o(t,i,e,s,h){var r;s&&(s=[s.seriesIndex,s.pointIndex,s.data],(r=jQuery.Event("jqplotDataClick")).which=t.which,r.pageX=t.pageX,r.pageY=t.pageY,h.target.trigger(r,s))}function d(t,i,e,s,h){var r;s&&(s=[s.seriesIndex,s.pointIndex,s.data],null!=(r=h.plugins.barRenderer.highlightedSeriesIndex)&&h.series[r].highlightMouseDown&&n(h),(r=jQuery.Event("jqplotDataRightClick")).which=t.which,r.pageX=t.pageX,r.pageY=t.pageY,h.target.trigger(r,s))}w.jqplot.BarRenderer=function(){w.jqplot.LineRenderer.call(this)},w.jqplot.BarRenderer.prototype=new w.jqplot.LineRenderer,w.jqplot.BarRenderer.prototype.constructor=w.jqplot.BarRenderer,w.jqplot.BarRenderer.prototype.init=function(t,i){this.barPadding=8,this.barMargin=10,this.barDirection="vertical",this.barWidth=null,this.shadowOffset=2,this.shadowDepth=5,this.shadowAlpha=.08,this.waterfall=!1,this.groups=1,this.varyBarColor=!1,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.transposedData=!0,this.renderer.animation={show:!1,direction:"down",speed:3e3,_supported:!0},this._type="bar",t.highlightMouseDown&&null==t.highlightMouseOver&&(t.highlightMouseOver=!1),w.extend(!0,this,t),w.extend(!0,this.renderer,t),this.fill=!0,"horizontal"===this.barDirection&&this.rendererOptions.animation&&null==this.rendererOptions.animation.direction&&(this.renderer.animation.direction="left"),this.waterfall&&(this.fillToZero=!1,this.disableStack=!0),"vertical"==this.barDirection?(this._primaryAxis="_xaxis",this._stackAxis="y",this.fillAxis="y"):(this._primaryAxis="_yaxis",this._stackAxis="x",this.fillAxis="x"),this._highlightedPoint=null,this._plotSeriesInfo=null,this._dataColors=[];t={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!(this._barPoints=[]),strokeStyle:this.color,fillStyle:this.color,closePath:this.fill},this.renderer.shapeRenderer.init(t),t={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,closePath:this.fill};this.renderer.shadowRenderer.init(t),i.postInitHooks.addOnce(e),i.postDrawHooks.addOnce(s),i.eventListenerHooks.addOnce("jqplotMouseMove",h),i.eventListenerHooks.addOnce("jqplotMouseDown",r),i.eventListenerHooks.addOnce("jqplotMouseUp",a),i.eventListenerHooks.addOnce("jqplotClick",o),i.eventListenerHooks.addOnce("jqplotRightClick",d)},w.jqplot.preSeriesInitHooks.push(function(t,i,e,s){if("horizontal"==this.rendererOptions.barDirection&&(this._stackAxis="x",this._primaryAxis="_yaxis"),1==this.rendererOptions.waterfall){this._data=w.extend(!0,[],this.data);for(var h=0,r=this.rendererOptions.barDirection&&"vertical"!==this.rendererOptions.barDirection&&!1!==this.transposedData?0:1,a=0;a<this.data.length;a++)h+=this.data[a][r],0<a&&(this.data[a][r]+=this.data[a-1][r]);this.data[this.data.length]=1==r?[this.data.length+1,h]:[h,this.data.length+1],this._data[this._data.length]=1==r?[this._data.length+1,h]:[h,this._data.length+1]}if(1<this.rendererOptions.groups){this.breakOnNull=!0;for(var l=this.data.length,n=parseInt(l/this.rendererOptions.groups,10),o=0,a=n;a<l;a+=n)this.data.splice(a+o,0,[null,null]),this._plotData.splice(a+o,0,[null,null]),this._stackData.splice(a+o,0,[null,null]),o++;for(a=0;a<this.data.length;a++)"_xaxis"==this._primaryAxis?(this.data[a][0]=a+1,this._plotData[a][0]=a+1,this._stackData[a][0]=a+1):(this.data[a][1]=a+1,this._plotData[a][1]=a+1,this._stackData[a][1]=a+1)}}),w.jqplot.BarRenderer.prototype.calcSeriesNumbers=function(){for(var t,i,e=0,s=0,h=this[this._primaryAxis],r=0;r<h._series.length;r++)(t=h._series[r])===this&&(i=r),t.renderer.constructor==w.jqplot.BarRenderer&&(e+=t.data.length,s+=1);return[e,s,i]},w.jqplot.BarRenderer.prototype.setBarWidth=function(){var t=this[this._primaryAxis],i=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),e=i[0],i=i[1],s=(t.numberTicks-1)/2;return"xaxis"==t.name||"x2axis"==t.name?this._stack?this.barWidth=(t._offsets.max-t._offsets.min)/e*i-this.barMargin:this.barWidth=((t._offsets.max-t._offsets.min)/s-this.barPadding*(i-1)-2*this.barMargin)/i:this._stack?this.barWidth=(t._offsets.min-t._offsets.max)/e*i-this.barMargin:this.barWidth=((t._offsets.min-t._offsets.max)/s-this.barPadding*(i-1)-2*this.barMargin)/i,[e,i]},w.jqplot.BarRenderer.prototype.draw=function(t,i,e,s){var h=w.extend({},e),r=(null!=h.shadow?h:this).shadow,e=(null!=h.showLine?h:this).showLine;(null!=h.fill?h:this).fill,this.xaxis,this.yaxis,this._xaxis.series_u2p,this._yaxis.series_u2p;this._dataColors=[],this._barPoints=[],null==this.barWidth&&this.renderer.setBarWidth.call(this);(v=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this))[0];var a=v[1],l=v[2],n=[];if(this._stack?this._barNudge=0:this._barNudge=(-Math.abs(a/2-.5)+l)*(this.barWidth+this.barPadding),e){var o,d=new w.jqplot.ColorGenerator(this.negativeSeriesColors),g=new w.jqplot.ColorGenerator(this.seriesColors),p=d.get(this.index),u=(this.useNegativeColors||(p=h.fillStyle),h.fillStyle);if("vertical"==this.barDirection)for(var _,c,f=0;f<i.length;f++)!this._stack&&null==this.data[f][1]||(n=[],_=i[f][0]+this._barNudge,c=this._stack&&this._prevGridData.length?y(this.index,f,this._plotData[f][1],s,"y"):this.fillToZero?this._yaxis.series_u2p(0):this.waterfall&&0<f&&f<this.gridData.length-1?this.gridData[f-1][1]:this.waterfall&&0==f&&f<this.gridData.length-1||this.waterfall&&f==this.gridData.length-1?this._yaxis.min<=0&&0<=this._yaxis.max?this._yaxis.series_u2p(0):0<this._yaxis.min?t.canvas.height:0:t.canvas.height,this.fillToZero&&this._plotData[f][1]<0||this.waterfall&&this._data[f][1]<0?this.varyBarColor&&!this._stack?this.useNegativeColors?h.fillStyle=d.next():h.fillStyle=g.next():h.fillStyle=p:this.varyBarColor&&!this._stack?h.fillStyle=g.next():h.fillStyle=u,!this.fillToZero||0<=this._plotData[f][1]?(n.push([_-this.barWidth/2,c]),n.push([_-this.barWidth/2,i[f][1]]),n.push([_+this.barWidth/2,i[f][1]]),n.push([_+this.barWidth/2,c])):(n.push([_-this.barWidth/2,i[f][1]]),n.push([_-this.barWidth/2,c]),n.push([_+this.barWidth/2,c]),n.push([_+this.barWidth/2,i[f][1]])),this._barPoints.push(n),r&&!this._stack&&(delete(x=w.extend(!0,{},h)).fillStyle,this.renderer.shadowRenderer.draw(t,n,x)),b=h.fillStyle||this.color,this._dataColors.push(b),this.renderer.shapeRenderer.draw(t,n,h));else if("horizontal"==this.barDirection)for(var x,b,f=0;f<i.length;f++)!this._stack&&null==this.data[f][0]||(n=[],_=i[f][1]-this._barNudge,o=this._stack&&this._prevGridData.length?y(this.index,f,this._plotData[f][0],s,"x"):this.fillToZero?this._xaxis.series_u2p(0):this.waterfall&&0<f&&f<this.gridData.length-1?this.gridData[f-1][0]:this.waterfall&&0==f&&f<this.gridData.length-1?this._xaxis.min<=0&&0<=this._xaxis.max?this._xaxis.series_u2p(0):(this._xaxis.min,0):this.waterfall&&f==this.gridData.length-1?this._xaxis.min<=0&&0<=this._xaxis.max?this._xaxis.series_u2p(0):0<this._xaxis.min?0:t.canvas.width:0,this.fillToZero&&this._plotData[f][0]<0||this.waterfall&&this._data[f][0]<0?this.varyBarColor&&!this._stack?this.useNegativeColors?h.fillStyle=d.next():h.fillStyle=g.next():h.fillStyle=p:this.varyBarColor&&!this._stack?h.fillStyle=g.next():h.fillStyle=u,!this.fillToZero||0<=this._plotData[f][0]?(n.push([o,_+this.barWidth/2]),n.push([o,_-this.barWidth/2]),n.push([i[f][0],_-this.barWidth/2]),n.push([i[f][0],_+this.barWidth/2])):(n.push([i[f][0],_+this.barWidth/2]),n.push([i[f][0],_-this.barWidth/2]),n.push([o,_-this.barWidth/2]),n.push([o,_+this.barWidth/2])),this._barPoints.push(n),r&&!this._stack&&(delete(x=w.extend(!0,{},h)).fillStyle,this.renderer.shadowRenderer.draw(t,n,x)),b=h.fillStyle||this.color,this._dataColors.push(b),this.renderer.shapeRenderer.draw(t,n,h))}if(0==this.highlightColors.length)this.highlightColors=w.jqplot.computeHighlightColors(this._dataColors);else if("string"==typeof this.highlightColors){var v=this.highlightColors;this.highlightColors=[];for(f=0;f<this._dataColors.length;f++)this.highlightColors.push(v)}},w.jqplot.BarRenderer.prototype.drawShadow=function(t,i,e,s){var h=null!=e?e:{},e=((null!=h.shadow?h:this).shadow,(null!=h.showLine?h:this).showLine);(null!=h.fill?h:this).fill,this.xaxis,this.yaxis,this._xaxis.series_u2p,this._yaxis.series_u2p;if(this._stack&&this.shadow){null==this.barWidth&&this.renderer.setBarWidth.call(this);var r=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),a=(r[0],r[1]),r=r[2];if(this._stack?this._barNudge=0:this._barNudge=(-Math.abs(a/2-.5)+r)*(this.barWidth+this.barPadding),e)if("vertical"==this.barDirection)for(var l,n,o=0;o<i.length;o++)null!=this.data[o][1]&&(l=[],d=i[o][0]+this._barNudge,n=this._stack&&this._prevGridData.length?y(this.index,o,this._plotData[o][1],s,"y"):this.fillToZero?this._yaxis.series_u2p(0):t.canvas.height,l.push([d-this.barWidth/2,n]),l.push([d-this.barWidth/2,i[o][1]]),l.push([d+this.barWidth/2,i[o][1]]),l.push([d+this.barWidth/2,n]),this.renderer.shadowRenderer.draw(t,l,h));else if("horizontal"==this.barDirection)for(var d,g,o=0;o<i.length;o++)null!=this.data[o][0]&&(l=[],d=i[o][1]-this._barNudge,g=this._stack&&this._prevGridData.length?y(this.index,o,this._plotData[o][0],s,"x"):this.fillToZero?this._xaxis.series_u2p(0):0,l.push([g,d+this.barWidth/2]),l.push([i[o][0],d+this.barWidth/2]),l.push([i[o][0],d-this.barWidth/2]),l.push([g,d-this.barWidth/2]),this.renderer.shadowRenderer.draw(t,l,h))}}}(jQuery);