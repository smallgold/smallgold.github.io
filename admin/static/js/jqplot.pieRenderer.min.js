!function(x){function C(e,t,i,s,r){var n=0,t=t-e,e=Math.abs(t);return 0==s&&(i+=r),n=0<i&&.01<e&&e<6.282?parseFloat(i)/2/Math.sin((t-(t-Math.PI)/8/Math.PI)/2):n}function h(e,t,i){for(var s=0;s<this.series.length;s++)this.series[s].renderer.constructor==x.jqplot.PieRenderer&&this.series[s].highlightMouseOver&&(this.series[s].highlightMouseDown=!1)}function l(e){for(var t=0;t<this.series.length;t++)this.series[t].seriesColors=this.seriesColors,this.series[t].colorGenerator=x.jqplot.colorGenerator}function o(e,t,i){var s=e.series[t],r=e.plugins.pieRenderer.highlightCanvas;r._ctx.clearRect(0,0,r._ctx.canvas.width,r._ctx.canvas.height),s._highlightedPoint=i,e.plugins.pieRenderer.highlightedSeriesIndex=t,s.renderer.drawSlice.call(s,r._ctx,s._sliceAngles[i][0],s._sliceAngles[i][1],s.highlightColorGenerator.get(i),!1)}function d(e){var t=e.plugins.pieRenderer.highlightCanvas;t._ctx.clearRect(0,0,t._ctx.canvas.width,t._ctx.canvas.height);for(var i=0;i<e.series.length;i++)e.series[i]._highlightedPoint=null;e.plugins.pieRenderer.highlightedSeriesIndex=null,e.target.trigger("jqplotDataUnhighlight")}function g(e,t,i,s,r){var n,a;s?(n=[s.seriesIndex,s.pointIndex,s.data],(a=jQuery.Event("jqplotDataMouseOver")).pageX=e.pageX,a.pageY=e.pageY,r.target.trigger(a,n),!r.series[n[0]].highlightMouseOver||n[0]==r.plugins.pieRenderer.highlightedSeriesIndex&&n[1]==r.series[n[0]]._highlightedPoint||((a=jQuery.Event("jqplotDataHighlight")).which=e.which,a.pageX=e.pageX,a.pageY=e.pageY,r.target.trigger(a,n),o(r,n[0],n[1]))):null==s&&d(r)}function p(e,t,i,s,r){var n,a;s?(n=[s.seriesIndex,s.pointIndex,s.data],!r.series[n[0]].highlightMouseDown||n[0]==r.plugins.pieRenderer.highlightedSeriesIndex&&n[1]==r.series[n[0]]._highlightedPoint||((a=jQuery.Event("jqplotDataHighlight")).which=e.which,a.pageX=e.pageX,a.pageY=e.pageY,r.target.trigger(a,n),o(r,n[0],n[1]))):null==s&&d(r)}function c(e,t,i,s,r){var n=r.plugins.pieRenderer.highlightedSeriesIndex;null!=n&&r.series[n].highlightMouseDown&&d(r)}function u(e,t,i,s,r){var n;s&&(s=[s.seriesIndex,s.pointIndex,s.data],(n=jQuery.Event("jqplotDataClick")).which=e.which,n.pageX=e.pageX,n.pageY=e.pageY,r.target.trigger(n,s))}function f(e,t,i,s,r){var n;s&&(s=[s.seriesIndex,s.pointIndex,s.data],null!=(n=r.plugins.pieRenderer.highlightedSeriesIndex)&&r.series[n].highlightMouseDown&&d(r),(n=jQuery.Event("jqplotDataRightClick")).which=e.which,n.pageX=e.pageX,n.pageY=e.pageY,r.target.trigger(n,s))}function v(){this.plugins.pieRenderer&&this.plugins.pieRenderer.highlightCanvas&&(this.plugins.pieRenderer.highlightCanvas.resetCanvas(),this.plugins.pieRenderer.highlightCanvas=null),this.plugins.pieRenderer={highlightedSeriesIndex:null},this.plugins.pieRenderer.highlightCanvas=new x.jqplot.GenericCanvas;var e=x(this.targetId+" .jqplot-data-label");(e.length?x(e[0]):this.eventCanvas._elem).before(this.plugins.pieRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-pieRenderer-highlight-canvas",this._plotDimensions,this)),this.plugins.pieRenderer.highlightCanvas.setContext();this.eventCanvas._elem.bind("mouseleave",{plot:this},function(e){d(e.data.plot)})}x.jqplot.PieRenderer=function(){x.jqplot.LineRenderer.call(this)},x.jqplot.PieRenderer.prototype=new x.jqplot.LineRenderer,x.jqplot.PieRenderer.prototype.constructor=x.jqplot.PieRenderer,x.jqplot.PieRenderer.prototype.init=function(e,t){if(this.diameter=null,this.padding=20,this.sliceMargin=0,this.fill=!0,this.shadowOffset=2,this.shadowAlpha=.07,this.shadowDepth=5,this.highlightMouseOver=!0,this.highlightMouseDown=!1,this.highlightColors=[],this.dataLabels="percent",this.showDataLabels=!1,this.dataLabelFormatString=null,this.dataLabelThreshold=3,this.dataLabelPositionFactor=.52,this.dataLabelNudge=2,this.dataLabelCenterOn=!0,this.startAngle=0,this.tickRenderer=x.jqplot.PieTickRenderer,this._drawData=!0,this._type="pie",e.highlightMouseDown&&null==e.highlightMouseOver&&(e.highlightMouseOver=!1),x.extend(!0,this,e),this.sliceMargin<0&&(this.sliceMargin=0),this._diameter=null,this._radius=null,this._sliceAngles=[],this._highlightedPoint=null,0==this.highlightColors.length)for(var i=0;i<this.seriesColors.length;i++){for(var s=x.jqplot.getColorComponents(this.seriesColors[i]),r=[s[0],s[1],s[2]],n=r[0]+r[1]+r[2],a=0;a<3;a++)r[a]=570<n?.8*r[a]:r[a]+.3*(255-r[a]),r[a]=parseInt(r[a],10);this.highlightColors.push("rgb("+r[0]+","+r[1]+","+r[2]+")")}this.highlightColorGenerator=new x.jqplot.ColorGenerator(this.highlightColors),t.postParseOptionsHooks.addOnce(l),t.postInitHooks.addOnce(h),t.eventListenerHooks.addOnce("jqplotMouseMove",g),t.eventListenerHooks.addOnce("jqplotMouseDown",p),t.eventListenerHooks.addOnce("jqplotMouseUp",c),t.eventListenerHooks.addOnce("jqplotClick",u),t.eventListenerHooks.addOnce("jqplotRightClick",f),t.postDrawHooks.addOnce(v)},x.jqplot.PieRenderer.prototype.setGridData=function(e){var t=[],i=[],s=(this.startAngle,Math.PI,0);this._drawData=!1;for(var r=0;r<this.data.length;r++)0!=this.data[r][1]&&(this._drawData=!0),t.push(this.data[r][1]),i.push([this.data[r][0]]),0<r&&(t[r]+=t[r-1]),s+=this.data[r][1];for(var n=2*Math.PI/t[t.length-1],r=0;r<t.length;r++)i[r][1]=t[r]*n,i[r][2]=this.data[r][1]/s;this.gridData=i},x.jqplot.PieRenderer.prototype.makeGridData=function(e,t){var i=[],s=[],r=0;this.startAngle,Math.PI;this._drawData=!1;for(var n=0;n<e.length;n++)0!=this.data[n][1]&&(this._drawData=!0),i.push(e[n][1]),s.push([e[n][0]]),0<n&&(i[n]+=i[n-1]),r+=e[n][1];for(var a=2*Math.PI/i[i.length-1],n=0;n<i.length;n++)s[n][1]=i[n]*a,s[n][2]=e[n][1]/r;return s},x.jqplot.PieRenderer.prototype.drawSlice=function(t,i,s,r,e){if(this._drawData){var n=this._radius,a=this.fill,h=this.lineWidth,l=(this.sliceMargin,0==this.fill&&this.lineWidth,t.save(),t.translate(this._center[0],this._center[1]),C(i,s,this.sliceMargin,this.fill,this.lineWidth)),o=l*Math.cos((i+s)/2),d=l*Math.sin((i+s)/2);if(s-i<=Math.PI?n-=l:n+=l,t.translate(o,d),e){for(var g=0,p=this.shadowDepth;g<p;g++)t.save(),t.translate(this.shadowOffset*Math.cos(this.shadowAngle/180*Math.PI),this.shadowOffset*Math.sin(this.shadowAngle/180*Math.PI)),c(n);for(g=0,p=this.shadowDepth;g<p;g++)t.restore()}else c(n);t.restore()}function c(e){s>6.282+this.startAngle&&(s=6.282+this.startAngle)<i&&(i=6.281+this.startAngle),s<=i||(t.beginPath(),t.fillStyle=r,t.strokeStyle=r,t.lineWidth=h,t.arc(0,0,e,i,s,!1),t.lineTo(0,0),t.closePath(),a?t.fill():t.stroke())}},x.jqplot.PieRenderer.prototype.draw=function(e,t,i,s){var r=null!=i?i:{},n=0,a=0,h=1,l=new x.jqplot.ColorGenerator(this.seriesColors);if(i.legendInfo&&"insideGrid"==i.legendInfo.placement){var o=i.legendInfo;switch(o.location){case"nw":case"w":case"sw":n=o.width+o.xoffset;break;case"ne":case"e":case"se":n=o.width+o.xoffset,h=-1;break;case"n":a=o.height+o.yoffset;break;case"s":a=o.height+o.yoffset,h=-1}}(null!=r.shadow?r:this).shadow,(null!=r.fill?r:this).fill;for(var d,g,p,c,i=e.canvas.width,r=e.canvas.height,u=i-n-2*this.padding,f=r-a-2*this.padding,u=Math.min(u,f),v=(this._sliceAngles=[],this.sliceMargin,0==this.fill&&this.lineWidth,0),j=this.startAngle/180*Math.PI,m=0,q=t.length;m<q;m++)g=0==m?j:t[m-1][1]+j,p=t[m][1]+j,this._sliceAngles.push([g,p]),d=C(g,p,this.sliceMargin,this.fill,this.lineWidth),Math.abs(p-g)>Math.PI&&(v=Math.max(d,v));if(null!=this.diameter&&0<this.diameter?this._diameter=this.diameter-2*v:this._diameter=u-2*v,this._diameter<6)x.jqplot.log("Diameter of pie too small, not rendering.");else{this._radius=this._diameter/2;if(this._center=[(i-h*n)/2+h*n+v*Math.cos(j),(r-h*a)/2+h*a+v*Math.sin(j)],this.shadow)for(m=0,q=t.length;m<q;m++)c="rgba(0,0,0,"+this.shadowAlpha+")",this.renderer.drawSlice.call(this,e,this._sliceAngles[m][0],this._sliceAngles[m][1],c,!0);for(var w,R,b,_,M,P,m=0;m<t.length;m++)this.renderer.drawSlice.call(this,e,this._sliceAngles[m][0],this._sliceAngles[m][1],l.next(),!1),this.showDataLabels&&100*t[m][2]>=this.dataLabelThreshold&&(R=(this._sliceAngles[m][0]+this._sliceAngles[m][1])/2,"label"==this.dataLabels?(w=this.dataLabelFormatString||"%s",b=x.jqplot.sprintf(w,t[m][0])):"value"==this.dataLabels?(w=this.dataLabelFormatString||"%d",b=x.jqplot.sprintf(w,this.data[m][1])):"percent"==this.dataLabels?(w=this.dataLabelFormatString||"%d%%",b=x.jqplot.sprintf(w,100*t[m][2])):this.dataLabels.constructor==Array&&(w=this.dataLabelFormatString||"%s",b=x.jqplot.sprintf(w,this.dataLabels[m])),M=this._radius*this.dataLabelPositionFactor+this.sliceMargin+this.dataLabelNudge,_=this._center[0]+Math.cos(R)*M+this.canvas._offsets.left,M=this._center[1]+Math.sin(R)*M+this.canvas._offsets.top,P=x('<div class="jqplot-pie-series jqplot-data-label" style="position:absolute;">'+b+"</div>").insertBefore(s.eventCanvas._elem),this.dataLabelCenterOn?_-=P.width()/2:_-=P.width()*Math.sin(R/2),M-=P.height()/2,_=Math.round(_),M=Math.round(M),P.css({left:_,top:M}))}},x.jqplot.PieAxisRenderer=function(){x.jqplot.LinearAxisRenderer.call(this)},x.jqplot.PieAxisRenderer.prototype=new x.jqplot.LinearAxisRenderer,x.jqplot.PieAxisRenderer.prototype.constructor=x.jqplot.PieAxisRenderer,x.jqplot.PieAxisRenderer.prototype.init=function(e){this.tickRenderer=x.jqplot.PieTickRenderer,x.extend(!0,this,e),this._dataBounds={min:0,max:100},this.min=0,this.max=100,this.showTicks=!1,this.ticks=[],this.showMark=!1,this.show=!1},x.jqplot.PieLegendRenderer=function(){x.jqplot.TableLegendRenderer.call(this)},x.jqplot.PieLegendRenderer.prototype=new x.jqplot.TableLegendRenderer,x.jqplot.PieLegendRenderer.prototype.constructor=x.jqplot.PieLegendRenderer,x.jqplot.PieLegendRenderer.prototype.init=function(e){this.numberRows=null,this.numberColumns=null,x.extend(!0,this,e)},x.jqplot.PieLegendRenderer.prototype.draw=function(){if(this.show){var e,t,i=this._series,s=(this._elem=x(document.createElement("table")),this._elem.addClass("jqplot-table-legend"),{position:"absolute"}),s=(this.background&&(s.background=this.background),this.border&&(s.border=this.border),this.fontSize&&(s.fontSize=this.fontSize),this.fontFamily&&(s.fontFamily=this.fontFamily),this.textColor&&(s.textColor=this.textColor),null!=this.marginTop&&(s.marginTop=this.marginTop),null!=this.marginBottom&&(s.marginBottom=this.marginBottom),null!=this.marginLeft&&(s.marginLeft=this.marginLeft),null!=this.marginRight&&(s.marginRight=this.marginRight),this._elem.css(s),i[0]),r=new x.jqplot.ColorGenerator(s.seriesColors);if(s.show)for(var n,a,h,l,o,d,g,p,c=s.data,u=(this.numberRows?(e=this.numberRows,t=this.numberColumns||Math.ceil(c.length/e)):this.numberColumns?(t=this.numberColumns,e=Math.ceil(c.length/this.numberColumns)):(e=c.length,t=1),0),f=0;f<e;f++)for((a=x(document.createElement("tr"))).addClass("jqplot-table-legend"),a.appendTo(this._elem),n=0;n<t;n++)u<c.length&&(l=this.labels[u]||c[u][0].toString(),d=r.next(),o=0<f?this.rowSpacing:"0",(h=x(document.createElement("td"))).addClass("jqplot-table-legend jqplot-table-legend-swatch"),h.css({textAlign:"center",paddingTop:o}),(g=x(document.createElement("div"))).addClass("jqplot-table-legend-swatch-outline"),(p=x(document.createElement("div"))).addClass("jqplot-table-legend-swatch"),p.css({backgroundColor:d,borderColor:d}),h.append(g.append(p)),(d=x(document.createElement("td"))).addClass("jqplot-table-legend jqplot-table-legend-label"),d.css("paddingTop",o),this.escapeHtml?d.text(l):d.html(l),h.appendTo(a),d.appendTo(a),0),u++}return this._elem},x.jqplot.PieRenderer.prototype.handleMove=function(e,t,i,s,r){var n;s?(n=[s.seriesIndex,s.pointIndex,s.data],r.target.trigger("jqplotDataMouseOver",n),!r.series[n[0]].highlightMouseOver||n[0]==r.plugins.pieRenderer.highlightedSeriesIndex&&n[1]==r.series[n[0]]._highlightedPoint||(r.target.trigger("jqplotDataHighlight",n),o(r,n[0],n[1]))):null==s&&d(r)},x.jqplot.preInitHooks.push(function(e,t,i){(i=i||{}).axesDefaults=i.axesDefaults||{},i.legend=i.legend||{},i.seriesDefaults=i.seriesDefaults||{};var s=!1;if(i.seriesDefaults.renderer==x.jqplot.PieRenderer)s=!0;else if(i.series)for(var r=0;r<i.series.length;r++)i.series[r].renderer==x.jqplot.PieRenderer&&(s=!0);s&&(i.axesDefaults.renderer=x.jqplot.PieAxisRenderer,i.legend.renderer=x.jqplot.PieLegendRenderer,i.legend.preDraw=!0,i.seriesDefaults.pointLabels={show:!1})}),x.jqplot.PieTickRenderer=function(){x.jqplot.AxisTickRenderer.call(this)},x.jqplot.PieTickRenderer.prototype=new x.jqplot.AxisTickRenderer,x.jqplot.PieTickRenderer.prototype.constructor=x.jqplot.PieTickRenderer}(jQuery);