!function(s,i,o){"use strict";var r,h,n,l,c,e,a,p,d,g,v,u,f,S,m,T;function t(t,e){this.el=t,this.options=e,h=h||T(),this.$el=s(this.el),this.doc=s(this.options.documentContext||o),this.win=s(this.options.windowContext||i),this.$content=this.$el.children("."+e.contentClass),this.$content.attr("tabindex",this.options.tabIndex||0),this.content=this.$content[0],this.options.iOSNativeScrolling&&null!=this.el.style.WebkitOverflowScrolling?this.nativeScrolling():this.generate(),this.createEvents(),this.addEvents(),this.reset()}m={paneClass:"pane",sliderClass:"slider",contentClass:"content",iOSNativeScrolling:!1,preventPageScrolling:!1,disableResize:!1,alwaysVisible:!1,flashDelay:1500,sliderMinHeight:20,sliderMaxHeight:null,documentContext:null,windowContext:null},u="scroll",e="mousedown",a="mousemove",d="mousewheel",p="mouseup",v="resize",c="drag",S="up",n="DOMMouseScroll",l="down",f="touchmove",r="Microsoft Internet Explorer"===i.navigator.appName&&/msie 7./i.test(i.navigator.appVersion)&&i.ActiveXObject,h=null,T=function(){var t=o.createElement("div"),e=t.style;return e.position="absolute",e.width="100px",e.height="100px",e.overflow=u,e.top="-9999px",o.body.appendChild(t),e=t.offsetWidth-t.clientWidth,o.body.removeChild(t),e},t.prototype.preventScrolling=function(t,e){this.isActive&&(t.type===n?(e===l&&0<t.originalEvent.detail||e===S&&t.originalEvent.detail<0)&&t.preventDefault():t.type===d&&t.originalEvent&&t.originalEvent.wheelDelta&&(e===l&&t.originalEvent.wheelDelta<0||e===S&&0<t.originalEvent.wheelDelta)&&t.preventDefault())},t.prototype.nativeScrolling=function(){this.$content.css({WebkitOverflowScrolling:"touch"}),this.iOSNativeScrolling=!0,this.isActive=!0},t.prototype.updateScrollValues=function(){var t=this.content;this.maxScrollTop=t.scrollHeight-t.clientHeight,this.prevScrollTop=this.contentScrollTop||0,this.contentScrollTop=t.scrollTop,this.iOSNativeScrolling||(this.maxSliderTop=this.paneHeight-this.sliderHeight,this.sliderTop=0===this.maxScrollTop?0:this.contentScrollTop*this.maxSliderTop/this.maxScrollTop)},t.prototype.createEvents=function(){var e=this;this.events={down:function(t){return e.isBeingDragged=!0,e.offsetY=t.pageY-e.slider.offset().top,e.pane.addClass("active"),e.doc.bind(a,e.events[c]).bind(p,e.events.up),!1},drag:function(t){return e.sliderY=t.pageY-e.$el.offset().top-e.offsetY,e.scroll(),e.updateScrollValues(),e.contentScrollTop>=e.maxScrollTop&&e.prevScrollTop!==e.maxScrollTop?e.$el.trigger("scrollend"):0===e.contentScrollTop&&0!==e.prevScrollTop&&e.$el.trigger("scrolltop"),!1},up:function(){return e.isBeingDragged=!1,e.pane.removeClass("active"),e.doc.unbind(a,e.events[c]).unbind(p,e.events.up),!1},resize:function(){e.reset()},panedown:function(t){return e.sliderY=(t.offsetY||t.originalEvent.layerY)-.5*e.sliderHeight,e.scroll(),e.events.down(t),!1},scroll:function(t){e.isBeingDragged||(e.updateScrollValues(),e.iOSNativeScrolling||(e.sliderY=e.sliderTop,e.slider.css({top:e.sliderTop})),null!=t&&(e.contentScrollTop>=e.maxScrollTop?(e.options.preventPageScrolling&&e.preventScrolling(t,l),e.prevScrollTop!==e.maxScrollTop&&e.$el.trigger("scrollend")):0===e.contentScrollTop&&(e.options.preventPageScrolling&&e.preventScrolling(t,S),0!==e.prevScrollTop)&&e.$el.trigger("scrolltop")))},wheel:function(t){if(null!=t)return(t=t.delta||t.wheelDelta||t.originalEvent&&t.originalEvent.wheelDelta||-t.detail||t.originalEvent&&-t.originalEvent.detail)&&(e.sliderY+=-t/3),e.scroll(),!1}}},t.prototype.addEvents=function(){var t;this.removeEvents(),t=this.events,this.options.disableResize||this.win.bind(v,t[v]),this.iOSNativeScrolling||(this.slider.bind(e,t[l]),this.pane.bind(e,t.panedown).bind(d+" "+n,t.wheel)),this.$content.bind(u+" "+d+" "+n+" "+f,t[u])},t.prototype.removeEvents=function(){var t=this.events;this.win.unbind(v,t[v]),this.iOSNativeScrolling||(this.slider.unbind(),this.pane.unbind()),this.$content.unbind(u+" "+d+" "+n+" "+f,t[u])},t.prototype.generate=function(){var t,e=this.options,i=e.paneClass,s=e.sliderClass;e.contentClass;return this.$el.find(""+i).length||this.$el.find(""+s).length||this.$el.append('<div class="'+i+'"><div class="'+s+'" /></div>'),this.pane=this.$el.children("."+i),this.slider=this.pane.find("."+s),h&&(t={right:-h},this.$el.addClass("has-scrollbar")),null!=t&&this.$content.css(t),this},t.prototype.restore=function(){this.stopped=!1,this.pane.show(),this.addEvents()},t.prototype.reset=function(){var t,e,i,s,o,n,l;return this.iOSNativeScrolling?void(this.contentHeight=this.content.scrollHeight):(this.$el.find("."+this.options.paneClass).length||this.generate().stop(),this.stopped&&this.restore(),s=(i=(t=this.content).style).overflowY,r&&this.$content.css({height:this.$content.height()}),e=t.scrollHeight+h,0<(n=parseInt(this.$el.css("max-height"),10))&&(this.$el.height(""),this.$el.height(t.scrollHeight>n?n:t.scrollHeight)),o=(n=this.pane.outerHeight(!1))+parseInt(this.pane.css("top"),10)+parseInt(this.pane.css("bottom"),10),(l=Math.round(o/e*o))<this.options.sliderMinHeight?l=this.options.sliderMinHeight:null!=this.options.sliderMaxHeight&&l>this.options.sliderMaxHeight&&(l=this.options.sliderMaxHeight),s===u&&i.overflowX!==u&&(l+=h),this.maxSliderTop=o-l,this.contentHeight=e,this.paneHeight=n,this.paneOuterHeight=o,this.sliderHeight=l,this.slider.height(l),this.events.scroll(),this.pane.show(),this.isActive=!0,t.scrollHeight===t.clientHeight||this.pane.outerHeight(!0)>=t.scrollHeight&&s!==u?(this.pane.hide(),this.isActive=!1):this.el.clientHeight===t.scrollHeight&&s===u?this.slider.hide():this.slider.show(),this.pane.css({opacity:this.options.alwaysVisible?1:"",visibility:this.options.alwaysVisible?"visible":""}),this)},t.prototype.scroll=function(){return this.isActive?(this.sliderY=Math.max(0,this.sliderY),this.sliderY=Math.min(this.maxSliderTop,this.sliderY),this.$content.scrollTop((this.paneHeight-this.contentHeight+h)*this.sliderY/this.maxSliderTop*-1),this.iOSNativeScrolling||this.slider.css({top:this.sliderY}),this):void 0},t.prototype.scrollBottom=function(t){return this.isActive?(this.reset(),this.$content.scrollTop(this.contentHeight-this.$content.height()-t).trigger(d),this):void 0},t.prototype.scrollTop=function(t){return this.isActive?(this.reset(),this.$content.scrollTop(+t).trigger(d),this):void 0},t.prototype.scrollTo=function(t){return this.isActive?(this.reset(),this.scrollTop(s(t).get(0).offsetTop),this):void 0},t.prototype.stop=function(){return this.stopped=!0,this.removeEvents(),this.pane.hide(),this},t.prototype.destroy=function(){return this.stopped||this.stop(),this.pane.length&&this.pane.remove(),r&&this.$content.height(""),this.$content.removeAttr("tabindex"),this.$el.hasClass("has-scrollbar")&&(this.$el.removeClass("has-scrollbar"),this.$content.css({right:""})),this},t.prototype.flash=function(){var t=this;if(this.isActive)return this.reset(),this.pane.addClass("flashed"),setTimeout(function(){t.pane.removeClass("flashed")},this.options.flashDelay),this},g=t,s.fn.nanoScroller=function(i){return this.each(function(){var t,e;if((e=this.nanoscroller)||(t=s.extend({},m,i),this.nanoscroller=e=new g(this,t)),i&&"object"==typeof i){if(s.extend(e.options,i),i.scrollBottom)return e.scrollBottom(i.scrollBottom);if(i.scrollTop)return e.scrollTop(i.scrollTop);if(i.scrollTo)return e.scrollTo(i.scrollTo);if("bottom"===i.scroll)return e.scrollBottom(0);if("top"===i.scroll)return e.scrollTop(0);if(i.scroll&&i.scroll instanceof s)return e.scrollTo(i.scroll);if(i.stop)return e.stop();if(i.destroy)return e.destroy();if(i.flash)return e.flash()}return e.reset()})},s.fn.nanoScroller.Constructor=g}(jQuery,window,document);