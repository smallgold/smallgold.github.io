!function(w){w.jqplot.LogAxisRenderer=function(){w.jqplot.LinearAxisRenderer.call(this),this.axisDefaults={base:10,tickDistribution:"power"}},w.jqplot.LogAxisRenderer.prototype=new w.jqplot.LinearAxisRenderer,w.jqplot.LogAxisRenderer.prototype.constructor=w.jqplot.LogAxisRenderer,w.jqplot.LogAxisRenderer.prototype.init=function(t){for(var e in this.drawBaseline=!0,this.minorTicks="auto",this._scalefact=1,w.extend(!0,this,t),this._autoFormatString="%d",this._overrideFormatString=!1,this.renderer.axisDefaults)null==this[e]&&(this[e]=this.renderer.axisDefaults[e]);this.resetDataBounds()},w.jqplot.LogAxisRenderer.prototype.createTicks=function(t){this._ticks;var e,i=this.ticks,s=(this.name,this._dataBounds),h="x"===this.name.charAt(0)?this._plotDimensions.width:this._plotDimensions.height;if(this._scalefact=(Math.max(h,31)-30)/300,i.length){for(g=0;g<i.length;g++){var a=i[g],r=new this.tickRenderer(this.tickOptions);a.constructor==Array?(r.value=a[0],r.label=a[1],this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),r.setTick(a[0],this.name)):w.isPlainObject(a)?(w.extend(!0,r,a),r.axis=this.name):(r.value=a,this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),r.setTick(a,this.name)),this._ticks.push(r)}this.numberTicks=i.length,this.min=this._ticks[0].value,this.max=this._ticks[this.numberTicks-1].value}else if(null==this.min&&null==this.max){if((x=s.min*(2-this.padMin))==(s=s.max*this.padMax)&&(x*=.95,s*=1.05),null!=this.min&&this.min<=0)throw new Error("Log axis minimum must be greater than 0");if(null!=this.max&&this.max<=0)throw new Error("Log axis maximum must be greater than 0");x=Math.pow(this.base,Math.floor(Math.log(x)/Math.log(this.base))),s=Math.pow(this.base,Math.ceil(Math.log(s)/Math.log(this.base))),0===x&&(x=1);var n,o,l,c,u=Math.round(Math.log(x)/Math.LN10),m=(null!=this.tickOptions&&this.tickOptions.formatString||(this._overrideFormatString=!0),this.min=x,this.max=s,this.max,this.min,"auto"===this.minorTicks?0:this.minorTicks);null==this.numberTicks?140<h?((n=Math.round(Math.log(this.max/this.min)/Math.log(this.base)+1))<2&&(n=2),0===m&&(m=(p=h/(n-1))<100?0:p<190?1:p<250?3:p<600?4:9)):(n=2,0===m&&(m=1),m=0):n=this.numberTicks,0<=u&&3!==m?this._autoFormatString="%d":u<=0&&3===m?(p=-(u-1),this._autoFormatString="%."+Math.abs(u-1)+"f"):u<0?(p=-u,this._autoFormatString="%."+Math.abs(u)+"f"):this._autoFormatString="%d";for(var g=0;g<n;g++)if(e=Math.pow(this.base,g-n+1)*this.max,r=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),r.setTick(e,this.name),this._ticks.push(r),m&&g<n-1){l=Math.pow(this.base,g-n+2)*this.max,c=l/(m+1);for(var k=m-1;0<=k;k--)o=l-c*(k+1),r=new this.tickRenderer(this.tickOptions),this._overrideFormatString&&""!=this._autoFormatString&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),r.setTick(o,this.name),this._ticks.push(r)}}else if(null!=this.min&&null!=this.max){var _=w.extend(!0,{},this.tickOptions,{name:this.name,value:null});if(null==this.numberTicks&&null==this.tickInterval){var x=Math.max(h,31),s=Math.ceil((x-30)/35+1),p=w.jqplot.LinearTickGenerator.bestConstrainedInterval(this.min,this.max,s);this._autoFormatString=p[3];for(var d=p[2],f=p[4],g=0;g<d;g++)_.value=this.min+g*f,r=new this.tickRenderer(_),this._overrideFormatString&&""!=this._autoFormatString&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),this._ticks.push(r)}else if(null!=this.numberTicks&&null!=this.tickInterval){d=this.numberTicks;for(g=0;g<d;g++)_.value=this.min+g*this.tickInterval,r=new this.tickRenderer(_),this._overrideFormatString&&""!=this._autoFormatString&&(r.formatString=this._autoFormatString),this.showTicks?this.showTickMarks||(r.showMark=!1):(r.showLabel=!1,r.showMark=!1),this._ticks.push(r)}}},w.jqplot.LogAxisRenderer.prototype.pack=function(t,e){function i(t){return Math.log(t)/Math.log(a)}function s(t){return Math.pow(Math.E,Math.log(a)*t)}var h,a=parseInt(this.base,10),r=this._ticks,n=i(this.max),o=i(this.min),l=e.max,c=e.min,u=null!=this._label&&this._label.show;for(h in t)this._elem.css(h,t[h]);this._offsets=e;var m=l-c,g=n-o;if(this.p2u=function(t){return s((t-c)*g/m+o)},this.u2p=function(t){return(i(t)-o)*m/g+c},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(t){return(i(t)-o)*m/g},this.series_p2u=function(t){return s(t*g/m+o)}):(this.series_u2p=function(t){return(i(t)-n)*m/g},this.series_p2u=function(t){return s(t*g/m+n)}),this.show)if("xaxis"==this.name||"x2axis"==this.name){for(var k=0;k<r.length;k++)if((x=r[k]).show&&x.showLabel){if(x.constructor==w.jqplot.CanvasAxisTickRenderer&&x.angle)switch(x.labelPosition){case"auto":p=x.angle<0?-x.getWidth()+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2:-x._textRenderer.height*Math.sin(x._textRenderer.angle)/2;break;case"end":p=-x.getWidth()+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2;break;case"start":p=-x._textRenderer.height*Math.sin(x._textRenderer.angle)/2;break;default:p=-x.getWidth()/2+x._textRenderer.height*Math.sin(-x._textRenderer.angle)/2}else p=-x.getWidth()/2;var _=this.u2p(x.value)+p+"px";x._elem.css("left",_),x.pack()}u&&(e=this._label._elem.outerWidth(!0),this._label._elem.css("left",c+m/2-e/2+"px"),"xaxis"==this.name?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack())}else{for(var x,p,k=0;k<r.length;k++)if((x=r[k]).show&&x.showLabel){if(x.constructor==w.jqplot.CanvasAxisTickRenderer&&x.angle)switch(x.labelPosition){case"auto":case"end":p=x.angle<0?-x._textRenderer.height*Math.cos(-x._textRenderer.angle)/2:-x.getHeight()+x._textRenderer.height*Math.cos(x._textRenderer.angle)/2;break;case"start":p=0<x.angle?-x._textRenderer.height*Math.cos(-x._textRenderer.angle)/2:-x.getHeight()+x._textRenderer.height*Math.cos(x._textRenderer.angle)/2;break;default:p=-x.getHeight()/2}else p=-x.getHeight()/2;_=this.u2p(x.value)+p+"px";x._elem.css("top",_),x.pack()}u&&(e=this._label._elem.outerHeight(!0),this._label._elem.css("top",l-m/2-e/2+"px"),"yaxis"==this.name?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack())}}}(jQuery);