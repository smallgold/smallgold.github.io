!function(v){v.jqplot.CategoryAxisRenderer=function(t){v.jqplot.LinearAxisRenderer.call(this),this.sortMergedLabels=!1},v.jqplot.CategoryAxisRenderer.prototype=new v.jqplot.LinearAxisRenderer,v.jqplot.CategoryAxisRenderer.prototype.constructor=v.jqplot.CategoryAxisRenderer,v.jqplot.CategoryAxisRenderer.prototype.init=function(t){this.groups=1,this.groupLabels=[],this._groupLabels=[],this._grouped=!1,this._barsPerGroup=null,this.reverse=!1,v.extend(!0,this,{tickOptions:{formatString:"%d"}},t);for(var e=this._dataBounds,s=0;s<this._series.length;s++)for(var i=this._series[s],h=(i.groups&&(this.groups=i.groups),i.data),r=0;r<h.length;r++)"xaxis"==this.name||"x2axis"==this.name?((h[r][0]<e.min||null==e.min)&&(e.min=h[r][0]),(h[r][0]>e.max||null==e.max)&&(e.max=h[r][0])):((h[r][1]<e.min||null==e.min)&&(e.min=h[r][1]),(h[r][1]>e.max||null==e.max)&&(e.max=h[r][1]));this.groupLabels.length&&(this.groups=this.groupLabels.length)},v.jqplot.CategoryAxisRenderer.prototype.createTicks=function(){this._ticks;var t=this.ticks,e=this.name;this._dataBounds;if(t.length){if(1<this.groups&&!this._grouped){for(var s=t.length,i=0,h=m=parseInt(s/this.groups,10);h<s;h+=m)t.splice(h+i,0," "),i++;this._grouped=!0}this.min=.5,this.max=t.length+.5;var r=this.max-this.min;for(this.numberTicks=2*t.length+1,h=0;h<t.length;h++){var a=this.min+2*h*r/(this.numberTicks-1);(d=new this.tickRenderer(this.tickOptions)).showLabel=!1,d.setTick(a,this.name),this._ticks.push(d),(d=new this.tickRenderer(this.tickOptions)).label=t[h],d.showMark=!1,d.showGridline=!1,d.setTick(a+.5,this.name),this._ticks.push(d)}(d=new this.tickRenderer(this.tickOptions)).showLabel=!1,d.setTick(a+1,this.name),this._ticks.push(d)}else{e="xaxis"==e||"x2axis"==e?this._plotDimensions.width:this._plotDimensions.height,null!=this.min&&null!=this.max&&null!=this.numberTicks&&(this.tickInterval=null),null!=this.min&&null!=this.max&&null!=this.tickInterval&&parseInt((this.max-this.min)/this.tickInterval,10)!=(this.max-this.min)/this.tickInterval&&(this.tickInterval=null);for(var n=[],l=0,o=!1,h=0;h<this._series.length;h++)for(var p=this._series[h],u=0;u<p.data.length;u++)_="xaxis"==this.name||"x2axis"==this.name?p.data[u][0]:p.data[u][1],-1==v.inArray(_,n)&&(o=!0,l+=1,n.push(_));o&&this.sortMergedLabels&&("string"==typeof n[0]?n.sort():n.sort(function(t,e){return t-e})),this.ticks=n;for(h=0;h<this._series.length;h++)for(p=this._series[h],u=0;u<p.data.length;u++){var _="xaxis"==this.name||"x2axis"==this.name?p.data[u][0]:p.data[u][1],c=v.inArray(_,n)+1;"xaxis"==this.name||"x2axis"==this.name?p.data[u][0]=c:p.data[u][1]=c}if(1<this.groups&&!this._grouped){for(s=n.length,i=0,h=m=parseInt(s/this.groups,10);h<s;h+=m+1)n[h]=" ";this._grouped=!0}x=l+.5,null==this.numberTicks&&(this.numberTicks=2*l+1);var r=x-.5,g=(this.min=.5,this.max=x,0),x=parseInt(3+e/10,10),m=parseInt(l/x,10);null==this.tickInterval&&(this.tickInterval=r/(this.numberTicks-1));for(h=0;h<this.numberTicks;h++){a=this.min+h*this.tickInterval;var d=new this.tickRenderer(this.tickOptions);h/2==parseInt(h/2,10)?(d.showLabel=!1,d.showMark=!0):(0<m&&g<m?(d.showLabel=!1,g+=1):(d.showLabel=!0,g=0),d.label=d.formatter(d.formatString,n[(h-1)/2]),d.showMark=!1,d.showGridline=!1),d.setTick(a,this.name),this._ticks.push(d)}}},v.jqplot.CategoryAxisRenderer.prototype.draw=function(t,e){if(this.show){this.renderer.createTicks.call(this);this._elem&&this._elem.emptyForce(),this._elem=this._elem||v('<div class="jqplot-axis jqplot-'+this.name+'" style="position:absolute;"></div>'),"xaxis"==this.name||"x2axis"==this.name?this._elem.width(this._plotDimensions.width):this._elem.height(this._plotDimensions.height),this.labelOptions.axis=this.name,this._label=new this.labelRenderer(this.labelOptions),this._label.show&&(r=this._label.draw(t,e)).appendTo(this._elem);for(var s=this._ticks,i=0;i<s.length;i++){var h=s[i];!h.showLabel||h.isMinorTick&&!this.showMinorTicks||(r=h.draw(t,e)).appendTo(this._elem)}this._groupLabels=[];for(var r,i=0;i<this.groupLabels.length;i++)(r=v('<div style="position:absolute;" class="jqplot-'+this.name+'-groupLabel"></div>')).html(this.groupLabels[i]),this._groupLabels.push(r),r.appendTo(this._elem)}return this._elem},v.jqplot.CategoryAxisRenderer.prototype.set=function(){var t=0,e=0,s=0,i=null!=this._label&&this._label.show;if(this.show){for(var h=this._ticks,r=0;r<h.length;r++){var a=h[r];!a.showLabel||a.isMinorTick&&!this.showMinorTicks||t<(l="xaxis"==this.name||"x2axis"==this.name?a._elem.outerHeight(!0):a._elem.outerWidth(!0))&&(t=l)}for(var n=0,r=0;r<this._groupLabels.length;r++){var l,o=this._groupLabels[r];n<(l="xaxis"==this.name||"x2axis"==this.name?o.outerHeight(!0):o.outerWidth(!0))&&(n=l)}i&&(e=this._label._elem.outerWidth(!0),s=this._label._elem.outerHeight(!0)),"xaxis"==this.name?this._elem.css({height:(t+=n+s)+"px",left:"0px",bottom:"0px"}):"x2axis"==this.name?this._elem.css({height:(t+=n+s)+"px",left:"0px",top:"0px"}):("yaxis"==this.name?this._elem.css({width:(t+=n+e)+"px",left:"0px",top:"0px"}):this._elem.css({width:(t+=n+e)+"px",right:"0px",top:"0px"}),i&&this._label.constructor==v.jqplot.AxisLabelRenderer&&this._label._elem.css("width",e+"px"))}},v.jqplot.CategoryAxisRenderer.prototype.pack=function(t,e){var s=this._ticks,i=this.max,h=this.min,r=e.max,a=e.min,n=null!=this._label&&this._label.show;for(k in t)this._elem.css(k,t[k]);this._offsets=e;var l,o=r-a,p=i-h;if(this.reverse?(this.u2p=function(t){return a+(i-t)*o/p},this.p2u=function(t){return h+(t-a)*p/o},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(t){return(i-t)*o/p},this.series_p2u=function(t){return t*p/o+i}):(this.series_u2p=function(t){return(h-t)*o/p},this.series_p2u=function(t){return t*p/o+h})):(this.u2p=function(t){return(t-h)*o/p+a},this.p2u=function(t){return(t-a)*p/o+h},"xaxis"==this.name||"x2axis"==this.name?(this.series_u2p=function(t){return(t-h)*o/p},this.series_p2u=function(t){return t*p/o+h}):(this.series_u2p=function(t){return(t-i)*o/p},this.series_p2u=function(t){return t*p/o+i})),this.show)if("xaxis"==this.name||"x2axis"==this.name){for(x=0;x<s.length;x++)if((f=s[x]).show&&f.showLabel){if(f.constructor==v.jqplot.CanvasAxisTickRenderer&&f.angle){var u="xaxis"==this.name?1:-1;switch(f.labelPosition){case"auto":l=u*f.angle<0?-f.getWidth()+f._textRenderer.height*Math.sin(-f._textRenderer.angle)/2:-f._textRenderer.height*Math.sin(f._textRenderer.angle)/2;break;case"end":l=-f.getWidth()+f._textRenderer.height*Math.sin(-f._textRenderer.angle)/2;break;case"start":l=-f._textRenderer.height*Math.sin(f._textRenderer.angle)/2;break;default:l=-f.getWidth()/2+f._textRenderer.height*Math.sin(-f._textRenderer.angle)/2}}else l=-f.getWidth()/2;var _=this.u2p(f.value)+l+"px";f._elem.css("left",_),f.pack()}for(var c=["bottom",0],g=(n&&(e=this._label._elem.outerWidth(!0),this._label._elem.css("left",a+o/2-e/2+"px"),c="xaxis"==this.name?(this._label._elem.css("bottom","0px"),["bottom",this._label._elem.outerHeight(!0)]):(this._label._elem.css("top","0px"),["top",this._label._elem.outerHeight(!0)]),this._label.pack()),parseInt(this._ticks.length/this.groups,10)+1),x=0;x<this._groupLabels.length;x++){for(var m=0,d=0,b=x*g;b<(x+1)*g;b++)b>=this._ticks.length-1||this._ticks[b]._elem&&" "!=this._ticks[b].label&&(m+=(k=(f=this._ticks[b]._elem).position()).left+f.outerWidth(!0)/2,d++);m/=d,this._groupLabels[x].css({left:m-this._groupLabels[x].outerWidth(!0)/2}),this._groupLabels[x].css(c[0],c[1])}}else{for(x=0;x<s.length;x++)if((f=s[x]).show&&f.showLabel){if(f.constructor==v.jqplot.CanvasAxisTickRenderer&&f.angle){u="yaxis"==this.name?1:-1;switch(f.labelPosition){case"auto":case"end":l=u*f.angle<0?-f._textRenderer.height*Math.cos(-f._textRenderer.angle)/2:-f.getHeight()+f._textRenderer.height*Math.cos(f._textRenderer.angle)/2;break;case"start":l=0<f.angle?-f._textRenderer.height*Math.cos(-f._textRenderer.angle)/2:-f.getHeight()+f._textRenderer.height*Math.cos(f._textRenderer.angle)/2;break;default:l=-f.getHeight()/2}}else l=-f.getHeight()/2;_=this.u2p(f.value)+l+"px";f._elem.css("top",_),f.pack()}c=["left",0],g=(n&&(e=this._label._elem.outerHeight(!0),this._label._elem.css("top",r-o/2-e/2+"px"),c="yaxis"==this.name?(this._label._elem.css("left","0px"),["left",this._label._elem.outerWidth(!0)]):(this._label._elem.css("right","0px"),["right",this._label._elem.outerWidth(!0)]),this._label.pack()),parseInt(this._ticks.length/this.groups,10)+1);for(x=0;x<this._groupLabels.length;x++){for(var f,k,m=0,d=0,b=x*g;b<(x+1)*g;b++)b>=this._ticks.length-1||this._ticks[b]._elem&&" "!=this._ticks[b].label&&(m+=(k=(f=this._ticks[b]._elem).position()).top+f.outerHeight()/2,d++);m/=d,this._groupLabels[x].css({top:m-this._groupLabels[x].outerHeight()/2}),this._groupLabels[x].css(c[0],c[1])}}}}(jQuery);